{"remainingRequest":"E:\\frontCode\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\frontCode\\security-enterprise-admin\\src\\views\\modules\\oss\\oss-upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\frontCode\\security-enterprise-admin\\src\\views\\modules\\oss\\oss-upload.vue","mtime":1657251814349},{"path":"E:\\frontCode\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657251795729},{"path":"E:\\frontCode\\security-enterprise-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1657251794312},{"path":"E:\\frontCode\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657251795729},{"path":"E:\\frontCode\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1657251812566}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ29va2llcyBmcm9tICdqcy1jb29raWUnDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICB2aXNpYmxlOiBmYWxzZSwNCiAgICAgIHVybDogJycsDQogICAgICBudW06IDAsDQogICAgICBmaWxlTGlzdDogW10NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0ICgpIHsNCiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWUNCiAgICAgIHRoaXMudXJsID0gYCR7d2luZG93LlNJVEVfQ09ORklHWydhcGlVUkwnXX0vc3lzL29zcy91cGxvYWQ/dG9rZW49JHtDb29raWVzLmdldCgndG9rZW4nKX1gDQogICAgICB0aGlzLm51bSA9IDANCiAgICAgIHRoaXMuZmlsZUxpc3QgPSBbXQ0KICAgIH0sDQogICAgLy8g5LiK5Lyg5LmL5YmNDQogICAgYmVmb3JlVXBsb2FkSGFuZGxlIChmaWxlKSB7DQogICAgICBpZiAoZmlsZS50eXBlICE9PSAnaW1hZ2UvanBnJyAmJiBmaWxlLnR5cGUgIT09ICdpbWFnZS9qcGVnJyAmJiBmaWxlLnR5cGUgIT09ICdpbWFnZS9wbmcnICYmIGZpbGUudHlwZSAhPT0gJ2ltYWdlL2dpZicpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih0aGlzLiR0KCd1cGxvYWQudGlwJywgeyAnZm9ybWF0JzogJ2pwZ+OAgXBuZ+OAgWdpZicgfSkpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgdGhpcy5udW0rKw0KICAgIH0sDQogICAgLy8g5LiK5Lyg5oiQ5YqfDQogICAgc3VjY2Vzc0hhbmRsZSAocmVzLCBmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgaWYgKHJlcy5jb2RlICE9PSAwKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpDQogICAgICB9DQogICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3QNCiAgICAgIHRoaXMubnVtLS0NCiAgICAgIGlmICh0aGlzLm51bSA9PT0gMCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9tcHQuc3VjY2VzcycpLA0KICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICBkdXJhdGlvbjogNTAwLA0KICAgICAgICAgIG9uQ2xvc2U6ICgpID0+IHsNCiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLiRlbWl0KCdyZWZyZXNoRGF0YUxpc3QnKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["oss-upload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"oss-upload.vue","sourceRoot":"src/views/modules/oss","sourcesContent":["<template>\r\n  <el-dialog :visible.sync=\"visible\" :title=\"$t('oss.upload')\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\">\r\n    <el-upload\r\n      :action=\"url\"\r\n      :file-list=\"fileList\"\r\n      drag\r\n      multiple\r\n      :before-upload=\"beforeUploadHandle\"\r\n      :on-success=\"successHandle\"\r\n      class=\"text-center\">\r\n      <i class=\"el-icon-upload\"></i>\r\n      <div class=\"el-upload__text\" v-html=\"$t('upload.text')\"></div>\r\n      <div class=\"el-upload__tip\" slot=\"tip\">{{ $t('upload.tip', { 'format': 'jpg、png、gif' }) }}</div>\r\n    </el-upload>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport Cookies from 'js-cookie'\r\nexport default {\r\n  data () {\r\n    return {\r\n      visible: false,\r\n      url: '',\r\n      num: 0,\r\n      fileList: []\r\n    }\r\n  },\r\n  methods: {\r\n    init () {\r\n      this.visible = true\r\n      this.url = `${window.SITE_CONFIG['apiURL']}/sys/oss/upload?token=${Cookies.get('token')}`\r\n      this.num = 0\r\n      this.fileList = []\r\n    },\r\n    // 上传之前\r\n    beforeUploadHandle (file) {\r\n      if (file.type !== 'image/jpg' && file.type !== 'image/jpeg' && file.type !== 'image/png' && file.type !== 'image/gif') {\r\n        this.$message.error(this.$t('upload.tip', { 'format': 'jpg、png、gif' }))\r\n        return false\r\n      }\r\n      this.num++\r\n    },\r\n    // 上传成功\r\n    successHandle (res, file, fileList) {\r\n      if (res.code !== 0) {\r\n        return this.$message.error(res.msg)\r\n      }\r\n      this.fileList = fileList\r\n      this.num--\r\n      if (this.num === 0) {\r\n        this.$message({\r\n          message: this.$t('prompt.success'),\r\n          type: 'success',\r\n          duration: 500,\r\n          onClose: () => {\r\n            this.visible = false\r\n            this.$emit('refreshDataList')\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}