{"remainingRequest":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\src\\components\\ren-process-running\\src\\ren-task-entrust.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\src\\components\\ren-process-running\\src\\ren-task-entrust.vue","mtime":1595727761851},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTZWxlY3RVc2VyIGZyb20gJy4vc2VsZWN0LXVzZXInCmltcG9ydCBxcyBmcm9tICdxcycKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIHNlbGVjdFVzZXJWaXNpYmxlOiBmYWxzZSwKICAgICAgZGF0YUZvcm06IHsKICAgICAgICBpZDogJycsCiAgICAgICAgZW50cnVzdFVzZXJJZDogJycsCiAgICAgICAgZW50cnVzdFVzZXJOYW1lOiAnJywKICAgICAgICB0YXNrSWQ6ICcnCiAgICAgIH0sCiAgICAgIC8vIOWbnuiwg+WHveaVsAogICAgICBjYWxsYmFja3M6IHsKICAgICAgICB0YXNrSGFuZGxlU3VjY2Vzc0NhbGxiYWNrOiBudWxsLAogICAgICAgIHRhc2tIYW5kbGVFcnJvckNhbGxiYWNrOiBudWxsCiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBkYXRhUnVsZSAoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgZW50cnVzdFVzZXJOYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiB0aGlzLiR0KCd2YWxpZGF0ZS5yZXF1aXJlZCcpLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgU2VsZWN0VXNlcgogIH0sCiAgbWV0aG9kczogewogICAgaW5pdCAoKSB7CiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnNbJ2RhdGFGb3JtJ10ucmVzZXRGaWVsZHMoKQogICAgICB9KQogICAgfSwKICAgIC8vIOWnlOaJmAogICAgZW50cnVzdFRhc2sgKCkgewogICAgICBpZiAoIXRoaXMuZGF0YUZvcm0uZW50cnVzdFVzZXJJZCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IodGhpcy4kdCgncHJvY2Vzcy5lbnRydXN0RXJyb3InKSkKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB2YXIgdGFzayA9IHFzLnN0cmluZ2lmeSh7CiAgICAgICAgdGFza0lkOiB0aGlzLmRhdGFGb3JtLnRhc2tJZCwKICAgICAgICBhc3NpZ25lZTogdGhpcy5kYXRhRm9ybS5lbnRydXN0VXNlcklkCiAgICAgIH0pCiAgICAgIHRoaXMuJGh0dHBbJ3Bvc3QnXSgnL2FjdC90YXNrL2VudHJ1c3QnLCB0YXNrKS50aGVuKCh7IGRhdGE6IHJlcyB9KSA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlICE9PSAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpCiAgICAgICAgICBpZiAodGhpcy5jYWxsYmFja3MudGFza0hhbmRsZUVycm9yQ2FsbGJhY2spIHsKICAgICAgICAgICAgdGhpcy5jYWxsYmFja3MudGFza0hhbmRsZUVycm9yQ2FsbGJhY2socmVzKQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvbXB0LnN1Y2Nlc3MnKSwKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIGR1cmF0aW9uOiA1MDAsCiAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7CiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgIGlmICh0aGlzLmNhbGxiYWNrcy50YXNrSGFuZGxlU3VjY2Vzc0NhbGxiYWNrKSB7CiAgICAgICAgICAgICAgdGhpcy5jYWxsYmFja3MudGFza0hhbmRsZVN1Y2Nlc3NDYWxsYmFjayhyZXMpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7fSkKICAgIH0sCiAgICBzZWxlY3RVc2VySW5mbyAoKSB7CiAgICAgIHRoaXMuc2VsZWN0VXNlclZpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLnNlbGVjdFVzZXIuZGF0YUZvcm0uaWQgPSAnJwogICAgICAgIHRoaXMuJHJlZnMuc2VsZWN0VXNlci5pbml0KHRoaXMuc2V0VXNlckluZm8pCiAgICAgIH0pCiAgICB9LAogICAgc2V0VXNlckluZm8gKHVzZXJJbmZvKSB7CiAgICAgIHRoaXMuZGF0YUZvcm0uZW50cnVzdFVzZXJJZCA9IHVzZXJJbmZvLmlkCiAgICAgIHRoaXMuZGF0YUZvcm0uZW50cnVzdFVzZXJOYW1lID0gdXNlckluZm8ucmVhbE5hbWUKICAgIH0KICB9Cn0K"},{"version":3,"sources":["ren-task-entrust.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ren-task-entrust.vue","sourceRoot":"src/components/ren-process-running/src","sourcesContent":["<template>\n  <el-dialog :visible.sync=\"visible\" :title=\"$t('process.entrustTask')\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\">\n    <el-form :model=\"dataForm\" :rules=\"dataRule\" ref=\"dataForm\" @keyup.enter.native=\"dataFormSubmitHandle()\" :label-width=\"$i18n.locale === 'en-US' ? '120px' : '80px'\">\n      <el-form-item :label=\"$t('process.assignee')\">\n        <el-input v-model=\"dataForm.entrustUserName\" class=\"input-with-select\">\n          <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"selectUserInfo()\"></el-button>\n        </el-input>\n      </el-form-item>\n    </el-form>\n    <template slot=\"footer\">\n      <el-button @click=\"visible = false\">{{ $t('cancel') }}</el-button>\n      <el-button type=\"primary\" @click=\"entrustTask()\">{{ $t('confirm') }}</el-button>\n    </template>\n    <select-user v-if=\"selectUserVisible\" ref=\"selectUser\" ></select-user>\n  </el-dialog>\n</template>\n\n<script>\nimport SelectUser from './select-user'\nimport qs from 'qs'\nexport default {\n  data () {\n    return {\n      visible: false,\n      selectUserVisible: false,\n      dataForm: {\n        id: '',\n        entrustUserId: '',\n        entrustUserName: '',\n        taskId: ''\n      },\n      // 回调函数\n      callbacks: {\n        taskHandleSuccessCallback: null,\n        taskHandleErrorCallback: null\n      }\n    }\n  },\n  computed: {\n    dataRule () {\n      return {\n        entrustUserName: [\n          { required: true, message: this.$t('validate.required'), trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  components: {\n    SelectUser\n  },\n  methods: {\n    init () {\n      this.visible = true\n      this.$nextTick(() => {\n        this.$refs['dataForm'].resetFields()\n      })\n    },\n    // 委托\n    entrustTask () {\n      if (!this.dataForm.entrustUserId) {\n        this.$message.error(this.$t('process.entrustError'))\n        return\n      }\n      var task = qs.stringify({\n        taskId: this.dataForm.taskId,\n        assignee: this.dataForm.entrustUserId\n      })\n      this.$http['post']('/act/task/entrust', task).then(({ data: res }) => {\n        if (res.code !== 0) {\n          this.$message.error(res.msg)\n          if (this.callbacks.taskHandleErrorCallback) {\n            this.callbacks.taskHandleErrorCallback(res)\n          }\n          return\n        }\n        this.$message({\n          message: this.$t('prompt.success'),\n          type: 'success',\n          duration: 500,\n          onClose: () => {\n            this.visible = false\n            if (this.callbacks.taskHandleSuccessCallback) {\n              this.callbacks.taskHandleSuccessCallback(res)\n            }\n          }\n        })\n      }).catch(() => {})\n    },\n    selectUserInfo () {\n      this.selectUserVisible = true\n      this.$nextTick(() => {\n        this.$refs.selectUser.dataForm.id = ''\n        this.$refs.selectUser.init(this.setUserInfo)\n      })\n    },\n    setUserInfo (userInfo) {\n      this.dataForm.entrustUserId = userInfo.id\n      this.dataForm.entrustUserName = userInfo.realName\n    }\n  }\n}\n</script>\n"]}]}