{"remainingRequest":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\src\\views\\modules\\activiti\\process.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\src\\views\\modules\\activiti\\process.vue","mtime":1595727761907},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtaXhpblZpZXdNb2R1bGUgZnJvbSAnQC9taXhpbnMvdmlldy1tb2R1bGUnCmltcG9ydCBEZXBsb3kgZnJvbSAnLi9wcm9jZXNzLWRlcGxveScKaW1wb3J0IFByb2Nlc3NCaXpSb3V0ZSBmcm9tICcuL3Byb2Nlc3MtYml6LXJvdXRlJwppbXBvcnQgQ29va2llcyBmcm9tICdqcy1jb29raWUnCmltcG9ydCBxcyBmcm9tICdxcycKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW21peGluVmlld01vZHVsZV0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBtaXhpblZpZXdNb2R1bGVPcHRpb25zOiB7CiAgICAgICAgZ2V0RGF0YUxpc3RVUkw6ICcvYWN0L3Byb2Nlc3MvcGFnZScsCiAgICAgICAgZ2V0RGF0YUxpc3RJc1BhZ2U6IHRydWUsCiAgICAgICAgZGVsZXRlVVJMOiAnL2FjdC9wcm9jZXNzJywKICAgICAgICBkZWxldGVJc0JhdGNoOiB0cnVlLAogICAgICAgIGRlbGV0ZUlzQmF0Y2hLZXk6ICdkZXBsb3ltZW50SWQnCiAgICAgIH0sCiAgICAgIGRhdGFGb3JtOiB7CiAgICAgICAgcHJvY2Vzc05hbWU6ICcnLAogICAgICAgIGtleTogJycKICAgICAgfSwKICAgICAgZGVwbG95VmlzaWJsZTogZmFsc2UsCiAgICAgIHNldEJpelJvdXRlVmlzaWJsZTogZmFsc2UKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIERlcGxveSwKICAgIFByb2Nlc3NCaXpSb3V0ZQogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5rWB56iLKHhtbC9pbWFnZSl1cmzlnLDlnYAKICAgIGdldFJlc291cmNlVVJMIChpZCwgbmFtZSkgewogICAgICB2YXIgcGFyYW1zID0gcXMuc3RyaW5naWZ5KHsKICAgICAgICAndG9rZW4nOiBDb29raWVzLmdldCgndG9rZW4nKSwKICAgICAgICAnZGVwbG95bWVudElkJzogaWQsCiAgICAgICAgJ3Jlc291cmNlTmFtZSc6IG5hbWUKICAgICAgfSkKICAgICAgcmV0dXJuIGAke3dpbmRvdy5TSVRFX0NPTkZJR1snYXBpVVJMJ119L2FjdC9wcm9jZXNzL3Jlc291cmNlPyR7cGFyYW1zfWAKICAgIH0sCiAgICAvLyDpg6jnvbLmtYHnqIvmlofku7YKICAgIGRlcGxveUhhbmRsZSAoKSB7CiAgICAgIHRoaXMuZGVwbG95VmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuZGVwbG95LmluaXQoKQogICAgICB9KQogICAgfSwKICAgIHNldEJpelJvdXRlIChyb3cpIHsKICAgICAgdGhpcy5zZXRCaXpSb3V0ZVZpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLnByb2Nlc3NCaXpSb3V0ZS5kYXRhRm9ybS5wcm9jRGVmSWQgPSByb3cuaWQKICAgICAgICB0aGlzLiRyZWZzLnByb2Nlc3NCaXpSb3V0ZS5kYXRhRm9ybS5wcm9jRGVmS2V5ID0gcm93LmtleQogICAgICAgIHRoaXMuJHJlZnMucHJvY2Vzc0JpelJvdXRlLmRhdGFGb3JtLnZlcnNpb24gPSByb3cudmVyc2lvbgogICAgICAgIHRoaXMuJHJlZnMucHJvY2Vzc0JpelJvdXRlLmluaXQoKQogICAgICB9KQogICAgfSwKICAgIC8vIOa/gOa0uwogICAgYWN0aXZlSGFuZGxlIChpZCkgewogICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ3Byb21wdC5pbmZvJywgeyAnaGFuZGxlJzogdGhpcy4kdCgncHJvY2Vzcy5hY3RpdmUnKSB9KSwgdGhpcy4kdCgncHJvbXB0LnRpdGxlJyksIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybScpLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NhbmNlbCcpLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRodHRwLnB1dChgL2FjdC9wcm9jZXNzL2FjdGl2ZS8ke2lkfWApLnRoZW4oKHsgZGF0YTogcmVzIH0pID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSAhPT0gMCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb21wdC5zdWNjZXNzJyksCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgZHVyYXRpb246IDUwMCwKICAgICAgICAgICAgb25DbG9zZTogKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0pLmNhdGNoKCgpID0+IHt9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7fSkKICAgIH0sCiAgICAvLyDmjILotbcKICAgIHN1c3BlbmRIYW5kbGUgKGlkKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0odGhpcy4kdCgncHJvbXB0LmluZm8nLCB7ICdoYW5kbGUnOiB0aGlzLiR0KCdwcm9jZXNzLnN1c3BlbmQnKSB9KSwgdGhpcy4kdCgncHJvbXB0LnRpdGxlJyksIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybScpLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NhbmNlbCcpLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRodHRwLnB1dChgL2FjdC9wcm9jZXNzL3N1c3BlbmQvJHtpZH1gKS50aGVuKCh7IGRhdGE6IHJlcyB9KSA9PiB7CiAgICAgICAgICBpZiAocmVzLmNvZGUgIT09IDApIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZykKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdwcm9tcHQuc3VjY2VzcycpLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsCiAgICAgICAgICAgIG9uQ2xvc2U6ICgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmdldERhdGFMaXN0KCkKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KS5jYXRjaCgoKSA9PiB7fSkKICAgICAgfSkuY2F0Y2goKCkgPT4ge30pCiAgICB9LAogICAgLy8g6L2s5o2i5Li65qih5Z6LCiAgICBjb252ZXJ0VG9Nb2RlbEhhbmRsZSAoaWQpIHsKICAgICAgdGhpcy4kY29uZmlybSh0aGlzLiR0KCdwcm9tcHQuaW5mbycsIHsgJ2hhbmRsZSc6IHRoaXMuJHQoJ3Byb2Nlc3MuY29udmVydFRvTW9kZWwnKSB9KSwgdGhpcy4kdCgncHJvbXB0LnRpdGxlJyksIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybScpLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NhbmNlbCcpLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRodHRwLnBvc3QoYC9hY3QvcHJvY2Vzcy9jb252ZXJ0VG9Nb2RlbC8ke2lkfWApLnRoZW4oKHsgZGF0YTogcmVzIH0pID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSAhPT0gMCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb21wdC5zdWNjZXNzJyksCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgZHVyYXRpb246IDUwMCwKICAgICAgICAgICAgb25DbG9zZTogKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0pLmNhdGNoKCgpID0+IHt9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7fSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["process.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"process.vue","sourceRoot":"src/views/modules/activiti","sourcesContent":["<template>\n  <el-card shadow=\"never\" class=\"aui-card--fill\">\n    <div class=\"mod-activiti__process\">\n      <el-form :inline=\"true\" :model=\"dataForm\" @keyup.enter.native=\"getDataList()\">\n        <el-form-item>\n          <el-input v-model=\"dataForm.processName\" :placeholder=\"$t('process.name')\" clearable></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-input v-model=\"dataForm.key\" :placeholder=\"$t('process.key')\" clearable></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button @click=\"getDataList()\">{{ $t('query') }}</el-button>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"deployHandle()\">{{ $t('process.deployFile') }}</el-button>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"danger\" @click=\"deleteHandle()\">{{ $t('deleteBatch') }}</el-button>\n        </el-form-item>\n      </el-form>\n      <el-table\n        v-loading=\"dataListLoading\"\n        :data=\"dataList\"\n        border\n        @selection-change=\"dataListSelectionChangeHandle\"\n        @sort-change=\"dataListSortChangeHandle\"\n        style=\"width: 100%;\">\n        <el-table-column type=\"selection\" header-align=\"center\" align=\"center\" width=\"50\"></el-table-column>\n        <el-table-column prop=\"id\" :label=\"$t('process.id')\" header-align=\"center\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"deploymentId\" :label=\"$t('process.deploymentId')\" header-align=\"center\" align=\"center\" width=\"80\"></el-table-column>\n        <el-table-column prop=\"name\" :label=\"$t('process.name')\" header-align=\"center\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"key\" :label=\"$t('process.key')\" header-align=\"center\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"version\" :label=\"$t('process.version')\" header-align=\"center\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"resourceName\" :label=\"$t('process.resourceName')\" header-align=\"center\" align=\"center\" :show-overflow-tooltip=\"true\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <a :href=\"getResourceURL(scope.row.deploymentId, scope.row.resourceName)\" target=\"_blank\">{{ scope.row.resourceName }}</a>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"diagramResourceName\" :label=\"$t('process.diagramResourceName')\" header-align=\"center\" align=\"center\" :show-overflow-tooltip=\"true\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <a :href=\"getResourceURL(scope.row.deploymentId, scope.row.diagramResourceName)\" target=\"_blank\">{{ scope.row.diagramResourceName }}</a>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"deploymentTime\" :label=\"$t('process.deploymentTime')\" header-align=\"center\" align=\"center\" width=\"180\"></el-table-column>\n        <el-table-column :label=\"$t('handle')\" fixed=\"right\" header-align=\"center\" align=\"center\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <el-button v-if=\"scope.row.suspended\" type=\"text\" size=\"small\" @click=\"activeHandle(scope.row.id)\">{{ $t('process.active') }}</el-button>\n            <el-button v-else type=\"text\" size=\"small\" @click=\"suspendHandle(scope.row.id)\">{{ $t('process.suspend') }}</el-button>\n            <el-button type=\"text\" size=\"small\" @click=\"deleteHandle(scope.row.deploymentId)\">{{ $t('delete') }}</el-button>\n            <el-button type=\"text\" size=\"small\" @click=\"convertToModelHandle(scope.row.id)\">{{ $t('process.convertToModel') }}</el-button>\n            <el-button type=\"text\" size=\"small\" @click=\"setBizRoute(scope.row)\">{{ $t('process.bizRouteSet') }}</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        :current-page=\"page\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        :page-size=\"limit\"\n        :total=\"total\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        @size-change=\"pageSizeChangeHandle\"\n        @current-change=\"pageCurrentChangeHandle\">\n      </el-pagination>\n      <!-- 弹窗, 部署流程文件 -->\n      <deploy v-if=\"deployVisible\" ref=\"deploy\" @refreshDataList=\"getDataList\"></deploy>\n      <process-biz-route v-if=\"setBizRouteVisible\" ref=\"processBizRoute\" @refreshDataList=\"getDataList\"></process-biz-route>\n    </div>\n  </el-card>\n</template>\n\n<script>\nimport mixinViewModule from '@/mixins/view-module'\nimport Deploy from './process-deploy'\nimport ProcessBizRoute from './process-biz-route'\nimport Cookies from 'js-cookie'\nimport qs from 'qs'\nexport default {\n  mixins: [mixinViewModule],\n  data () {\n    return {\n      mixinViewModuleOptions: {\n        getDataListURL: '/act/process/page',\n        getDataListIsPage: true,\n        deleteURL: '/act/process',\n        deleteIsBatch: true,\n        deleteIsBatchKey: 'deploymentId'\n      },\n      dataForm: {\n        processName: '',\n        key: ''\n      },\n      deployVisible: false,\n      setBizRouteVisible: false\n    }\n  },\n  components: {\n    Deploy,\n    ProcessBizRoute\n  },\n  methods: {\n    // 获取流程(xml/image)url地址\n    getResourceURL (id, name) {\n      var params = qs.stringify({\n        'token': Cookies.get('token'),\n        'deploymentId': id,\n        'resourceName': name\n      })\n      return `${window.SITE_CONFIG['apiURL']}/act/process/resource?${params}`\n    },\n    // 部署流程文件\n    deployHandle () {\n      this.deployVisible = true\n      this.$nextTick(() => {\n        this.$refs.deploy.init()\n      })\n    },\n    setBizRoute (row) {\n      this.setBizRouteVisible = true\n      this.$nextTick(() => {\n        this.$refs.processBizRoute.dataForm.procDefId = row.id\n        this.$refs.processBizRoute.dataForm.procDefKey = row.key\n        this.$refs.processBizRoute.dataForm.version = row.version\n        this.$refs.processBizRoute.init()\n      })\n    },\n    // 激活\n    activeHandle (id) {\n      this.$confirm(this.$t('prompt.info', { 'handle': this.$t('process.active') }), this.$t('prompt.title'), {\n        confirmButtonText: this.$t('confirm'),\n        cancelButtonText: this.$t('cancel'),\n        type: 'warning'\n      }).then(() => {\n        this.$http.put(`/act/process/active/${id}`).then(({ data: res }) => {\n          if (res.code !== 0) {\n            return this.$message.error(res.msg)\n          }\n          this.$message({\n            message: this.$t('prompt.success'),\n            type: 'success',\n            duration: 500,\n            onClose: () => {\n              this.getDataList()\n            }\n          })\n        }).catch(() => {})\n      }).catch(() => {})\n    },\n    // 挂起\n    suspendHandle (id) {\n      this.$confirm(this.$t('prompt.info', { 'handle': this.$t('process.suspend') }), this.$t('prompt.title'), {\n        confirmButtonText: this.$t('confirm'),\n        cancelButtonText: this.$t('cancel'),\n        type: 'warning'\n      }).then(() => {\n        this.$http.put(`/act/process/suspend/${id}`).then(({ data: res }) => {\n          if (res.code !== 0) {\n            return this.$message.error(res.msg)\n          }\n          this.$message({\n            message: this.$t('prompt.success'),\n            type: 'success',\n            duration: 500,\n            onClose: () => {\n              this.getDataList()\n            }\n          })\n        }).catch(() => {})\n      }).catch(() => {})\n    },\n    // 转换为模型\n    convertToModelHandle (id) {\n      this.$confirm(this.$t('prompt.info', { 'handle': this.$t('process.convertToModel') }), this.$t('prompt.title'), {\n        confirmButtonText: this.$t('confirm'),\n        cancelButtonText: this.$t('cancel'),\n        type: 'warning'\n      }).then(() => {\n        this.$http.post(`/act/process/convertToModel/${id}`).then(({ data: res }) => {\n          if (res.code !== 0) {\n            return this.$message.error(res.msg)\n          }\n          this.$message({\n            message: this.$t('prompt.success'),\n            type: 'success',\n            duration: 500,\n            onClose: () => {\n              this.getDataList()\n            }\n          })\n        }).catch(() => {})\n      }).catch(() => {})\n    }\n  }\n}\n</script>\n"]}]}