{"remainingRequest":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\src\\views\\modules\\oss\\oss-upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\src\\views\\modules\\oss\\oss-upload.vue","mtime":1595727761916},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639029294232},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1639029293447},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639029294232},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1639029303663}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb29raWVzIGZyb20gJ2pzLWNvb2tpZScKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIHVybDogJycsCiAgICAgIG51bTogMCwKICAgICAgZmlsZUxpc3Q6IFtdCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0ICgpIHsKICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLnVybCA9IGAke3dpbmRvdy5TSVRFX0NPTkZJR1snYXBpVVJMJ119L3N5cy9vc3MvdXBsb2FkP3Rva2VuPSR7Q29va2llcy5nZXQoJ3Rva2VuJyl9YAogICAgICB0aGlzLm51bSA9IDAKICAgICAgdGhpcy5maWxlTGlzdCA9IFtdCiAgICB9LAogICAgLy8g5LiK5Lyg5LmL5YmNCiAgICBiZWZvcmVVcGxvYWRIYW5kbGUgKGZpbGUpIHsKICAgICAgaWYgKGZpbGUudHlwZSAhPT0gJ2ltYWdlL2pwZycgJiYgZmlsZS50eXBlICE9PSAnaW1hZ2UvanBlZycgJiYgZmlsZS50eXBlICE9PSAnaW1hZ2UvcG5nJyAmJiBmaWxlLnR5cGUgIT09ICdpbWFnZS9naWYnKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih0aGlzLiR0KCd1cGxvYWQudGlwJywgeyAnZm9ybWF0JzogJ2pwZ+OAgXBuZ+OAgWdpZicgfSkpCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgdGhpcy5udW0rKwogICAgfSwKICAgIC8vIOS4iuS8oOaIkOWKnwogICAgc3VjY2Vzc0hhbmRsZSAocmVzLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICBpZiAocmVzLmNvZGUgIT09IDApIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQogICAgICB9CiAgICAgIHRoaXMuZmlsZUxpc3QgPSBmaWxlTGlzdAogICAgICB0aGlzLm51bS0tCiAgICAgIGlmICh0aGlzLm51bSA9PT0gMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgncHJvbXB0LnN1Y2Nlc3MnKSwKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIGR1cmF0aW9uOiA1MDAsCiAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7CiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3JlZnJlc2hEYXRhTGlzdCcpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["oss-upload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"oss-upload.vue","sourceRoot":"src/views/modules/oss","sourcesContent":["<template>\n  <el-dialog :visible.sync=\"visible\" :title=\"$t('oss.upload')\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\">\n    <el-upload\n      :action=\"url\"\n      :file-list=\"fileList\"\n      drag\n      multiple\n      :before-upload=\"beforeUploadHandle\"\n      :on-success=\"successHandle\"\n      class=\"text-center\">\n      <i class=\"el-icon-upload\"></i>\n      <div class=\"el-upload__text\" v-html=\"$t('upload.text')\"></div>\n      <div class=\"el-upload__tip\" slot=\"tip\">{{ $t('upload.tip', { 'format': 'jpg、png、gif' }) }}</div>\n    </el-upload>\n  </el-dialog>\n</template>\n\n<script>\nimport Cookies from 'js-cookie'\nexport default {\n  data () {\n    return {\n      visible: false,\n      url: '',\n      num: 0,\n      fileList: []\n    }\n  },\n  methods: {\n    init () {\n      this.visible = true\n      this.url = `${window.SITE_CONFIG['apiURL']}/sys/oss/upload?token=${Cookies.get('token')}`\n      this.num = 0\n      this.fileList = []\n    },\n    // 上传之前\n    beforeUploadHandle (file) {\n      if (file.type !== 'image/jpg' && file.type !== 'image/jpeg' && file.type !== 'image/png' && file.type !== 'image/gif') {\n        this.$message.error(this.$t('upload.tip', { 'format': 'jpg、png、gif' }))\n        return false\n      }\n      this.num++\n    },\n    // 上传成功\n    successHandle (res, file, fileList) {\n      if (res.code !== 0) {\n        return this.$message.error(res.msg)\n      }\n      this.fileList = fileList\n      this.num--\n      if (this.num === 0) {\n        this.$message({\n          message: this.$t('prompt.success'),\n          type: 'success',\n          duration: 500,\n          onClose: () => {\n            this.visible = false\n            this.$emit('refreshDataList')\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n"]}]}