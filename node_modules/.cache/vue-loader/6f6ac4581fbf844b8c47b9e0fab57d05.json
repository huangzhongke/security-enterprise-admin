{"remainingRequest":"E:\\frontCode\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\frontCode\\security-enterprise-admin\\src\\views\\main-navbar.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\frontCode\\security-enterprise-admin\\src\\views\\main-navbar.vue","mtime":1657251814330},{"path":"E:\\frontCode\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657251795729},{"path":"E:\\frontCode\\security-enterprise-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1657251794312},{"path":"E:\\frontCode\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657251795729},{"path":"E:\\frontCode\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1657251812566}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtZXNzYWdlcyB9IGZyb20gJ0AvaTE4bicNCmltcG9ydCBzY3JlZW5mdWxsIGZyb20gJ3NjcmVlbmZ1bGwnDQppbXBvcnQgVXBkYXRlUGFzc3dvcmQgZnJvbSAnLi9tYWluLW5hdmJhci11cGRhdGUtcGFzc3dvcmQnDQppbXBvcnQgeyBjbGVhckxvZ2luSW5mbyB9IGZyb20gJ0AvdXRpbHMnDQp2YXIgc29ja2V0ID0gbnVsbA0KZXhwb3J0IGRlZmF1bHQgew0KICBpbmplY3Q6IFsncmVmcmVzaCddLA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaTE4bk1lc3NhZ2VzOiBtZXNzYWdlcywNCiAgICAgIHVwZGF0ZVBhc3N3b3JkVmlzaWJsZTogZmFsc2UsDQogICAgICBtZXNzYWdlVGlwOiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIFVwZGF0ZVBhc3N3b3JkDQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIHZhciB2dWUgPSB0aGlzDQogICAgc29ja2V0ID0gbmV3IFdlYlNvY2tldChgJHt3aW5kb3cuU0lURV9DT05GSUdbJ3NvY2tldFVSTCddfWApDQogICAgc29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uICgpIHt9DQogICAgc29ja2V0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2dWUuJG5vdGlmeS5lcnJvcih7DQogICAgICAgIHRpdGxlOiB2dWUuJHQoJ25vdGljZS5kaXNjb25uZWN0JyksDQogICAgICAgIG1lc3NhZ2U6IHZ1ZS4kdCgnbm90aWNlLmRpc2Nvbm5lY3RNZXNzYWdlJykNCiAgICAgIH0pDQogICAgfQ0KICAgIHNvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZ0KSB7DQogICAgICBjb25zdCByZXN1bHQgPSBKU09OLnBhcnNlKGV2dC5kYXRhKQ0KDQogICAgICAvLyDlpoLmnpzmmK/mnInmlrDmlofmnKzpgJrnn6XvvIzliJnmj5DnpLrmnInmlrDpgJrnn6UNCiAgICAgIGlmIChyZXN1bHQudHlwZSA9PT0gMCkgew0KICAgICAgICB2dWUubWVzc2FnZVRpcCA9IHRydWUNCiAgICAgICAgdnVlLiRub3RpZnkoew0KICAgICAgICAgIHRpdGxlOiB2dWUuJHQoJ25vdGljZS5uZXcnKSwNCiAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubXNnLA0KICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICBkdXJhdGlvbjogNTAwMA0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIOacquivu+mAmuefpeaVsA0KICAgIHRoaXMuZ2V0VW5SZWFkQ291bnQoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgbXlOb3RpY2VSb3V0ZXIgKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoJ25vdGljZS1ub3RpY2UtdXNlcicpDQogICAgfSwNCiAgICBnZXRVblJlYWRDb3VudCAoKSB7DQogICAgICB0aGlzLiRodHRwLmdldChgL3N5cy9ub3RpY2UvbXlub3RpY2UvdW5yZWFkYCkudGhlbigoeyBkYXRhOiByZXMgfSkgPT4gew0KICAgICAgICBpZiAocmVzLmNvZGUgIT09IDApIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQ0KICAgICAgICB9DQogICAgICAgIGlmIChyZXMuZGF0YSA+IDApIHsNCiAgICAgICAgICB0aGlzLm1lc3NhZ2VUaXAgPSB0cnVlDQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KQ0KICAgIH0sDQogICAgLy8g5YWo5bGPDQogICAgZnVsbHNjcmVlbkhhbmRsZSAoKSB7DQogICAgICBpZiAoIXNjcmVlbmZ1bGwuZW5hYmxlZCkgew0KICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnZnVsbHNjcmVlbi5wcm9tcHQnKSwNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICAgICAgZHVyYXRpb246IDUwMA0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgICAgc2NyZWVuZnVsbC50b2dnbGUoKQ0KICAgIH0sDQogICAgLy8g5L+u5pS55a+G56CBDQogICAgdXBkYXRlUGFzc3dvcmRIYW5kbGUgKCkgew0KICAgICAgdGhpcy51cGRhdGVQYXNzd29yZFZpc2libGUgPSB0cnVlDQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuJHJlZnMudXBkYXRlUGFzc3dvcmQuaW5pdCgpDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g6YCA5Ye6DQogICAgbG9nb3V0SGFuZGxlICgpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0odGhpcy4kdCgncHJvbXB0LmluZm8nLCB7ICdoYW5kbGUnOiB0aGlzLiR0KCdsb2dvdXQnKSB9KSwgdGhpcy4kdCgncHJvbXB0LnRpdGxlJyksIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm0nKSwNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgnY2FuY2VsJyksDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuJGh0dHAucG9zdCgnL2xvZ291dCcpLnRoZW4oKHsgZGF0YTogcmVzIH0pID0+IHsNCiAgICAgICAgICBpZiAocmVzLmNvZGUgIT09IDApIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpDQogICAgICAgICAgfQ0KICAgICAgICAgIGNsZWFyTG9naW5JbmZvKCkNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdsb2dpbicgfSkNCiAgICAgICAgfSkuY2F0Y2goKCkgPT4ge30pDQogICAgICB9KS5jYXRjaCgoKSA9PiB7fSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["main-navbar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main-navbar.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <nav class=\"aui-navbar\" :class=\"`aui-navbar--${$store.state.navbarLayoutType}`\">\r\n    <div class=\"aui-navbar__header\">\r\n      <h1 class=\"aui-navbar__brand\" @click=\"$router.push({ name: 'home' })\">\r\n        <a class=\"aui-navbar__brand-lg\" href=\"javascript:;\">{{ $t('brand.lg') }}</a>\r\n        <a class=\"aui-navbar__brand-mini\" href=\"javascript:;\">{{ $t('brand.mini') }}</a>\r\n      </h1>\r\n    </div>\r\n    <div class=\"aui-navbar__body\">\r\n      <el-menu class=\"aui-navbar__menu mr-auto\" mode=\"horizontal\">\r\n        <el-menu-item index=\"1\" @click=\"$store.state.sidebarFold = !$store.state.sidebarFold\">\r\n          <svg class=\"icon-svg aui-navbar__icon-menu aui-navbar__icon-menu--switch\" aria-hidden=\"true\"><use xlink:href=\"#icon-outdent\"></use></svg>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"2\" @click=\"refresh()\">\r\n          <svg class=\"icon-svg aui-navbar__icon-menu aui-navbar__icon-menu--refresh\" aria-hidden=\"true\"><use xlink:href=\"#icon-sync\"></use></svg>\r\n        </el-menu-item>\r\n      </el-menu>\r\n      <el-menu class=\"aui-navbar__menu\" mode=\"horizontal\">\r\n        <el-menu-item index=\"1\">\r\n          <el-dropdown placement=\"bottom\" :show-timeout=\"0\">\r\n            <el-button size=\"mini\">{{ $t('_lang') }}</el-button>\r\n            <el-dropdown-menu slot=\"dropdown\">\r\n              <el-dropdown-item v-for=\"(val, key) in i18nMessages\" :key=\"key\" @click.native=\"$i18n.locale = key\">{{ val._lang }}</el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"2\">\r\n          <a href=\"//www.renren.io/\" target=\"_blank\">\r\n            <svg class=\"icon-svg aui-navbar__icon-menu\" aria-hidden=\"true\"><use xlink:href=\"#icon-earth\"></use></svg>\r\n          </a>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"3\" v-if=\"$hasPermission('sys:notice:all')\">\r\n          <el-badge :is-dot=\"messageTip\">\r\n            <a href=\"#\"  @click=\"myNoticeRouter()\"><i class=\"el-icon-bell\"></i></a>\r\n          </el-badge>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"4\" @click=\"fullscreenHandle()\">\r\n          <svg class=\"icon-svg aui-navbar__icon-menu\" aria-hidden=\"true\"><use xlink:href=\"#icon-fullscreen\"></use></svg>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"5\" class=\"aui-navbar__avatar\">\r\n          <el-dropdown placement=\"bottom\" :show-timeout=\"0\">\r\n            <span class=\"el-dropdown-link\">\r\n              <img src=\"~@/assets/img/avatar.png\">\r\n              <span>{{ $store.state.user.name }}</span>\r\n              <i class=\"el-icon-arrow-down\"></i>\r\n            </span>\r\n            <el-dropdown-menu slot=\"dropdown\">\r\n              <el-dropdown-item @click.native=\"updatePasswordHandle()\">{{ $t('updatePassword.title') }}</el-dropdown-item>\r\n              <el-dropdown-item @click.native=\"logoutHandle()\">{{ $t('logout') }}</el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n        </el-menu-item>\r\n      </el-menu>\r\n    </div>\r\n    <!-- 弹窗, 修改密码 -->\r\n    <update-password v-if=\"updatePasswordVisible\" ref=\"updatePassword\"></update-password>\r\n  </nav>\r\n</template>\r\n<script>\r\nimport { messages } from '@/i18n'\r\nimport screenfull from 'screenfull'\r\nimport UpdatePassword from './main-navbar-update-password'\r\nimport { clearLoginInfo } from '@/utils'\r\nvar socket = null\r\nexport default {\r\n  inject: ['refresh'],\r\n  data () {\r\n    return {\r\n      i18nMessages: messages,\r\n      updatePasswordVisible: false,\r\n      messageTip: false\r\n    }\r\n  },\r\n  components: {\r\n    UpdatePassword\r\n  },\r\n  created () {\r\n    var vue = this\r\n    socket = new WebSocket(`${window.SITE_CONFIG['socketURL']}`)\r\n    socket.onopen = function () {}\r\n    socket.onerror = function () {\r\n      vue.$notify.error({\r\n        title: vue.$t('notice.disconnect'),\r\n        message: vue.$t('notice.disconnectMessage')\r\n      })\r\n    }\r\n    socket.onmessage = function (evt) {\r\n      const result = JSON.parse(evt.data)\r\n\r\n      // 如果是有新文本通知，则提示有新通知\r\n      if (result.type === 0) {\r\n        vue.messageTip = true\r\n        vue.$notify({\r\n          title: vue.$t('notice.new'),\r\n          message: result.msg,\r\n          type: 'info',\r\n          duration: 5000\r\n        })\r\n      }\r\n    }\r\n\r\n    // 未读通知数\r\n    this.getUnReadCount()\r\n  },\r\n  methods: {\r\n    myNoticeRouter () {\r\n      this.$router.replace('notice-notice-user')\r\n    },\r\n    getUnReadCount () {\r\n      this.$http.get(`/sys/notice/mynotice/unread`).then(({ data: res }) => {\r\n        if (res.code !== 0) {\r\n          return this.$message.error(res.msg)\r\n        }\r\n        if (res.data > 0) {\r\n          this.messageTip = true\r\n        }\r\n      }).catch(() => {})\r\n    },\r\n    // 全屏\r\n    fullscreenHandle () {\r\n      if (!screenfull.enabled) {\r\n        return this.$message({\r\n          message: this.$t('fullscreen.prompt'),\r\n          type: 'warning',\r\n          duration: 500\r\n        })\r\n      }\r\n      screenfull.toggle()\r\n    },\r\n    // 修改密码\r\n    updatePasswordHandle () {\r\n      this.updatePasswordVisible = true\r\n      this.$nextTick(() => {\r\n        this.$refs.updatePassword.init()\r\n      })\r\n    },\r\n    // 退出\r\n    logoutHandle () {\r\n      this.$confirm(this.$t('prompt.info', { 'handle': this.$t('logout') }), this.$t('prompt.title'), {\r\n        confirmButtonText: this.$t('confirm'),\r\n        cancelButtonText: this.$t('cancel'),\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.$http.post('/logout').then(({ data: res }) => {\r\n          if (res.code !== 0) {\r\n            return this.$message.error(res.msg)\r\n          }\r\n          clearLoginInfo()\r\n          this.$router.push({ name: 'login' })\r\n        }).catch(() => {})\r\n      }).catch(() => {})\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}