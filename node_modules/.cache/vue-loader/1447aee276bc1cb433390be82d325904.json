{"remainingRequest":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\src\\views\\modules\\activiti\\model.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\src\\views\\modules\\activiti\\model.vue","mtime":1595727761904},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtaXhpblZpZXdNb2R1bGUgZnJvbSAnQC9taXhpbnMvdmlldy1tb2R1bGUnCmltcG9ydCBBZGRPclVwZGF0ZSBmcm9tICcuL21vZGVsLWFkZC1vci11cGRhdGUnCmltcG9ydCBDb29raWVzIGZyb20gJ2pzLWNvb2tpZScKaW1wb3J0IHFzIGZyb20gJ3FzJwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbbWl4aW5WaWV3TW9kdWxlXSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIG1peGluVmlld01vZHVsZU9wdGlvbnM6IHsKICAgICAgICBnZXREYXRhTGlzdFVSTDogJy9hY3QvbW9kZWwvcGFnZScsCiAgICAgICAgZ2V0RGF0YUxpc3RJc1BhZ2U6IHRydWUsCiAgICAgICAgZGVsZXRlVVJMOiAnL2FjdC9tb2RlbCcsCiAgICAgICAgZGVsZXRlSXNCYXRjaDogdHJ1ZQogICAgICB9LAogICAgICBkYXRhRm9ybTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGtleTogJycKICAgICAgfQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgQWRkT3JVcGRhdGUKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPluWcqOe6v+iuvuiuoXVybOWcsOWdgAogICAgZ2V0TW9kZWxlclVSTCAoaWQpIHsKICAgICAgdmFyIHBhcmFtcyA9IHFzLnN0cmluZ2lmeSh7CiAgICAgICAgJ3Rva2VuJzogQ29va2llcy5nZXQoJ3Rva2VuJyksCiAgICAgICAgJ21vZGVsSWQnOiBpZAogICAgICB9KQogICAgICByZXR1cm4gYCR7d2luZG93LlNJVEVfQ09ORklHWydhcGlVUkwnXX0vbW9kZWxlci5odG1sPyR7cGFyYW1zfWAKICAgIH0sCiAgICAvLyDojrflj5blr7zlh7p1cmzlnLDlnYAKICAgIGdldEV4cG9ydFVSTCAoaWQpIHsKICAgICAgdmFyIHBhcmFtcyA9IHFzLnN0cmluZ2lmeSh7CiAgICAgICAgJ3Rva2VuJzogQ29va2llcy5nZXQoJ3Rva2VuJykKICAgICAgfSkKICAgICAgcmV0dXJuIGAke3dpbmRvdy5TSVRFX0NPTkZJR1snYXBpVVJMJ119L2FjdC9tb2RlbC9leHBvcnQvJHtpZH0/JHtwYXJhbXN9YAogICAgfSwKICAgIC8vIOmDqOe9sgogICAgZGVwbG95SGFuZGxlIChpZCkgewogICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ3Byb21wdC5pbmZvJywgeyAnaGFuZGxlJzogdGhpcy4kdCgnbW9kZWwuZGVwbG95JykgfSksIHRoaXMuJHQoJ3Byb21wdC50aXRsZScpLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NvbmZpcm0nKSwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiB0aGlzLiR0KCdjYW5jZWwnKSwKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kaHR0cC5wb3N0KGAvYWN0L21vZGVsL2RlcGxveS8ke2lkfWApLnRoZW4oKHsgZGF0YTogcmVzIH0pID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSAhPT0gMCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb21wdC5zdWNjZXNzJyksCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgZHVyYXRpb246IDUwMCwKICAgICAgICAgICAgb25DbG9zZTogKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0pLmNhdGNoKCgpID0+IHt9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7fSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["model.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"model.vue","sourceRoot":"src/views/modules/activiti","sourcesContent":["<template>\n  <el-card shadow=\"never\" class=\"aui-card--fill\">\n    <div class=\"mod-activiti__model\">\n      <el-form :inline=\"true\" :model=\"dataForm\" @keyup.enter.native=\"getDataList()\">\n        <el-form-item>\n          <el-input v-model=\"dataForm.name\" :placeholder=\"$t('model.name')\" clearable></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-input v-model=\"dataForm.key\" :placeholder=\"$t('model.key')\" clearable></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button @click=\"getDataList()\">{{ $t('query') }}</el-button>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"addOrUpdateHandle()\">{{ $t('add') }}</el-button>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"danger\" @click=\"deleteHandle()\">{{ $t('deleteBatch') }}</el-button>\n        </el-form-item>\n      </el-form>\n      <el-table\n        v-loading=\"dataListLoading\"\n        :data=\"dataList\"\n        border\n        @selection-change=\"dataListSelectionChangeHandle\"\n        @sort-change=\"dataListSortChangeHandle\"\n        style=\"width: 100%;\">\n        <el-table-column type=\"selection\" header-align=\"center\" align=\"center\" width=\"50\"></el-table-column>\n        <el-table-column prop=\"name\" :label=\"$t('model.name')\" header-align=\"center\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"key\" :label=\"$t('model.key')\" header-align=\"center\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"version\" :label=\"$t('model.version')\" header-align=\"center\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"createTime\" :label=\"$t('model.createTime')\" header-align=\"center\" align=\"center\" width=\"180\"></el-table-column>\n        <el-table-column prop=\"lastUpdateTime\" :label=\"$t('model.lastUpdateTime')\" header-align=\"center\" align=\"center\" width=\"180\"></el-table-column>\n        <el-table-column :label=\"$t('handle')\" fixed=\"right\" header-align=\"center\" align=\"center\" width=\"150\">\n          <template slot-scope=\"scope\">\n            <a :href=\"getModelerURL(scope.row.id)\" target=\"_blank\" class=\"el-button el-button--text el-button--small\">{{ $t('model.design') }}</a>\n            <el-button type=\"text\" size=\"small\" @click=\"deployHandle(scope.row.id)\">{{ $t('model.deploy') }}</el-button>\n            <a :href=\"getExportURL(scope.row.id)\" target=\"_blank\" class=\"el-button el-button--text el-button--small\">{{ $t('export') }}</a>\n            <el-button type=\"text\" size=\"small\" @click=\"deleteHandle(scope.row.id)\">{{ $t('delete') }}</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        :current-page=\"page\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        :page-size=\"limit\"\n        :total=\"total\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        @size-change=\"pageSizeChangeHandle\"\n        @current-change=\"pageCurrentChangeHandle\">\n      </el-pagination>\n      <!-- 弹窗, 新增 / 修改 -->\n      <add-or-update v-if=\"addOrUpdateVisible\" ref=\"addOrUpdate\" @refreshDataList=\"getDataList\"></add-or-update>\n    </div>\n  </el-card>\n</template>\n\n<script>\nimport mixinViewModule from '@/mixins/view-module'\nimport AddOrUpdate from './model-add-or-update'\nimport Cookies from 'js-cookie'\nimport qs from 'qs'\nexport default {\n  mixins: [mixinViewModule],\n  data () {\n    return {\n      mixinViewModuleOptions: {\n        getDataListURL: '/act/model/page',\n        getDataListIsPage: true,\n        deleteURL: '/act/model',\n        deleteIsBatch: true\n      },\n      dataForm: {\n        name: '',\n        key: ''\n      }\n    }\n  },\n  components: {\n    AddOrUpdate\n  },\n  methods: {\n    // 获取在线设计url地址\n    getModelerURL (id) {\n      var params = qs.stringify({\n        'token': Cookies.get('token'),\n        'modelId': id\n      })\n      return `${window.SITE_CONFIG['apiURL']}/modeler.html?${params}`\n    },\n    // 获取导出url地址\n    getExportURL (id) {\n      var params = qs.stringify({\n        'token': Cookies.get('token')\n      })\n      return `${window.SITE_CONFIG['apiURL']}/act/model/export/${id}?${params}`\n    },\n    // 部署\n    deployHandle (id) {\n      this.$confirm(this.$t('prompt.info', { 'handle': this.$t('model.deploy') }), this.$t('prompt.title'), {\n        confirmButtonText: this.$t('confirm'),\n        cancelButtonText: this.$t('cancel'),\n        type: 'warning'\n      }).then(() => {\n        this.$http.post(`/act/model/deploy/${id}`).then(({ data: res }) => {\n          if (res.code !== 0) {\n            return this.$message.error(res.msg)\n          }\n          this.$message({\n            message: this.$t('prompt.success'),\n            type: 'success',\n            duration: 500,\n            onClose: () => {\n              this.getDataList()\n            }\n          })\n        }).catch(() => {})\n      }).catch(() => {})\n    }\n  }\n}\n</script>\n"]}]}