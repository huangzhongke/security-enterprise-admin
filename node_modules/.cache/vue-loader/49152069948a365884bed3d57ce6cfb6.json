{"remainingRequest":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\src\\views\\main.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\src\\views\\main.vue","mtime":1595727761901},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNYWluTmF2YmFyIGZyb20gJy4vbWFpbi1uYXZiYXInCmltcG9ydCBNYWluU2lkZWJhciBmcm9tICcuL21haW4tc2lkZWJhcicKaW1wb3J0IE1haW5Db250ZW50IGZyb20gJy4vbWFpbi1jb250ZW50JwppbXBvcnQgTWFpblRoZW1lVG9vbHMgZnJvbSAnLi9tYWluLXRoZW1lLXRvb2xzJwppbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoL2RlYm91bmNlJwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvdmlkZSAoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDliLfmlrAKICAgICAgcmVmcmVzaCAoKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY29udGVudElzTmVlZFJlZnJlc2ggPSB0cnVlCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuY29udGVudElzTmVlZFJlZnJlc2ggPSBmYWxzZQogICAgICAgIH0pCiAgICAgIH0KICAgIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogdHJ1ZQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgTWFpbk5hdmJhciwKICAgIE1haW5TaWRlYmFyLAogICAgTWFpbkNvbnRlbnQsCiAgICBNYWluVGhlbWVUb29scwogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZTogJ3JvdXRlSGFuZGxlJwogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLndpbmRvd1Jlc2l6ZUhhbmRsZSgpCiAgICB0aGlzLnJvdXRlSGFuZGxlKHRoaXMuJHJvdXRlKQogICAgUHJvbWlzZS5hbGwoWwogICAgICB0aGlzLmdldFVzZXJJbmZvKCksCiAgICAgIHRoaXMuZ2V0UGVybWlzc2lvbnMoKQogICAgXSkudGhlbigoKSA9PiB7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICB9KQogIH0sCiAgbWV0aG9kczogewogICAgLy8g56qX5Y+j5pS55Y+Y5aSn5bCPCiAgICB3aW5kb3dSZXNpemVIYW5kbGUgKCkgewogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zaWRlYmFyRm9sZCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsnY2xpZW50V2lkdGgnXSA8PSA5OTIgfHwgZmFsc2UKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlKCgpID0+IHsKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zaWRlYmFyRm9sZCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsnY2xpZW50V2lkdGgnXSA8PSA5OTIgfHwgZmFsc2UKICAgICAgfSwgMTUwKSkKICAgIH0sCiAgICAvLyDot6/nlLEsIOebkeWQrAogICAgcm91dGVIYW5kbGUgKHJvdXRlKSB7CiAgICAgIGlmICghcm91dGUubWV0YS5pc1RhYikgewogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICAgIHZhciB0YWIgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jb250ZW50VGFicy5maWx0ZXIoaXRlbSA9PiBpdGVtLm5hbWUgPT09IHJvdXRlLm5hbWUpWzBdCiAgICAgIGlmICghdGFiKSB7CiAgICAgICAgdGFiID0gewogICAgICAgICAgLi4ud2luZG93LlNJVEVfQ09ORklHWydjb250ZW50VGFiRGVmYXVsdCddLAogICAgICAgICAgLi4ucm91dGUubWV0YSwKICAgICAgICAgICduYW1lJzogcm91dGUubmFtZSwKICAgICAgICAgICdwYXJhbXMnOiB7IC4uLnJvdXRlLnBhcmFtcyB9LAogICAgICAgICAgJ3F1ZXJ5JzogeyAuLi5yb3V0ZS5xdWVyeSB9CiAgICAgICAgfQogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNvbnRlbnRUYWJzID0gdGhpcy4kc3RvcmUuc3RhdGUuY29udGVudFRhYnMuY29uY2F0KHRhYikKICAgICAgfQogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zaWRlYmFyTWVudUFjdGl2ZU5hbWUgPSB0YWIubWVudUlkCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNvbnRlbnRUYWJzQWN0aXZlTmFtZSA9IHRhYi5uYW1lCiAgICB9LAogICAgLy8g6I635Y+W5b2T5YmN566h55CG5ZGY5L+h5oGvCiAgICBnZXRVc2VySW5mbyAoKSB7CiAgICAgIHJldHVybiB0aGlzLiRodHRwLmdldCgnL3N5cy91c2VyL2luZm8nKS50aGVuKCh7IGRhdGE6IHJlcyB9KSA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlICE9PSAwKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKQogICAgICAgIH0KICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmlkID0gcmVzLmRhdGEuaWQKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLm5hbWUgPSByZXMuZGF0YS51c2VybmFtZQogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuc3VwZXJBZG1pbiA9IHJlcy5kYXRhLnN1cGVyQWRtaW4KICAgICAgfSkuY2F0Y2goKCkgPT4ge30pCiAgICB9LAogICAgLy8g6I635Y+W5p2D6ZmQCiAgICBnZXRQZXJtaXNzaW9ucyAoKSB7CiAgICAgIHJldHVybiB0aGlzLiRodHRwLmdldCgnL3N5cy9tZW51L3Blcm1pc3Npb25zJykudGhlbigoeyBkYXRhOiByZXMgfSkgPT4gewogICAgICAgIGlmIChyZXMuY29kZSAhPT0gMCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZykKICAgICAgICB9CiAgICAgICAgd2luZG93LlNJVEVfQ09ORklHWydwZXJtaXNzaW9ucyddID0gcmVzLmRhdGEKICAgICAgfSkuY2F0Y2goKCkgPT4ge30pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div v-loading.fullscreen.lock=\"loading\" :element-loading-text=\"$t('loading')\" :class=\"['aui-wrapper', { 'aui-sidebar--fold': $store.state.sidebarFold }]\">\n    <template v-if=\"!loading\">\n      <main-navbar />\n      <main-sidebar />\n      <div class=\"aui-content__wrapper\">\n        <main-content v-if=\"!$store.state.contentIsNeedRefresh\" />\n      </div>\n      <main-theme-tools />\n    </template>\n  </div>\n</template>\n\n<script>\nimport MainNavbar from './main-navbar'\nimport MainSidebar from './main-sidebar'\nimport MainContent from './main-content'\nimport MainThemeTools from './main-theme-tools'\nimport debounce from 'lodash/debounce'\nexport default {\n  provide () {\n    return {\n      // 刷新\n      refresh () {\n        this.$store.state.contentIsNeedRefresh = true\n        this.$nextTick(() => {\n          this.$store.state.contentIsNeedRefresh = false\n        })\n      }\n    }\n  },\n  data () {\n    return {\n      loading: true\n    }\n  },\n  components: {\n    MainNavbar,\n    MainSidebar,\n    MainContent,\n    MainThemeTools\n  },\n  watch: {\n    $route: 'routeHandle'\n  },\n  created () {\n    this.windowResizeHandle()\n    this.routeHandle(this.$route)\n    Promise.all([\n      this.getUserInfo(),\n      this.getPermissions()\n    ]).then(() => {\n      this.loading = false\n    })\n  },\n  methods: {\n    // 窗口改变大小\n    windowResizeHandle () {\n      this.$store.state.sidebarFold = document.documentElement['clientWidth'] <= 992 || false\n      window.addEventListener('resize', debounce(() => {\n        this.$store.state.sidebarFold = document.documentElement['clientWidth'] <= 992 || false\n      }, 150))\n    },\n    // 路由, 监听\n    routeHandle (route) {\n      if (!route.meta.isTab) {\n        return false\n      }\n      var tab = this.$store.state.contentTabs.filter(item => item.name === route.name)[0]\n      if (!tab) {\n        tab = {\n          ...window.SITE_CONFIG['contentTabDefault'],\n          ...route.meta,\n          'name': route.name,\n          'params': { ...route.params },\n          'query': { ...route.query }\n        }\n        this.$store.state.contentTabs = this.$store.state.contentTabs.concat(tab)\n      }\n      this.$store.state.sidebarMenuActiveName = tab.menuId\n      this.$store.state.contentTabsActiveName = tab.name\n    },\n    // 获取当前管理员信息\n    getUserInfo () {\n      return this.$http.get('/sys/user/info').then(({ data: res }) => {\n        if (res.code !== 0) {\n          return this.$message.error(res.msg)\n        }\n        this.$store.state.user.id = res.data.id\n        this.$store.state.user.name = res.data.username\n        this.$store.state.user.superAdmin = res.data.superAdmin\n      }).catch(() => {})\n    },\n    // 获取权限\n    getPermissions () {\n      return this.$http.get('/sys/menu/permissions').then(({ data: res }) => {\n        if (res.code !== 0) {\n          return this.$message.error(res.msg)\n        }\n        window.SITE_CONFIG['permissions'] = res.data\n      }).catch(() => {})\n    }\n  }\n}\n</script>\n"]}]}