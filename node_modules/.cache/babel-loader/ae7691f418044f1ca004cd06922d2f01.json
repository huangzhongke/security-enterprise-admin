{"remainingRequest":"E:\\frontCode\\security-enterprise-admin\\node_modules\\babel-loader\\lib\\index.js!E:\\frontCode\\security-enterprise-admin\\src\\utils\\request.js","dependencies":[{"path":"E:\\frontCode\\security-enterprise-admin\\src\\utils\\request.js","mtime":1657251814329},{"path":"E:\\frontCode\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657251795729},{"path":"E:\\frontCode\\security-enterprise-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1657251794312}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJFOi9mcm9udENvZGUvc2VjdXJpdHktZW50ZXJwcmlzZS1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBDb29raWVzIGZyb20gJ2pzLWNvb2tpZSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgcXMgZnJvbSAncXMnOwppbXBvcnQgeyBjbGVhckxvZ2luSW5mbyB9IGZyb20gJ0AvdXRpbHMnOwppbXBvcnQgaXNQbGFpbk9iamVjdCBmcm9tICdsb2Rhc2gvaXNQbGFpbk9iamVjdCc7CnZhciBodHRwID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiB3aW5kb3cuU0lURV9DT05GSUdbJ2FwaVVSTCddLAogIHRpbWVvdXQ6IDEwMDAgKiAxODAsCiAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCn0pOwovKioNCiAqIOivt+axguaLpuaIqg0KICovCgpodHRwLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgY29uZmlnLmhlYWRlcnNbJ0FjY2VwdC1MYW5ndWFnZSddID0gQ29va2llcy5nZXQoJ2xhbmd1YWdlJykgfHwgJ3poLUNOJzsKICBjb25maWcuaGVhZGVyc1sndG9rZW4nXSA9IENvb2tpZXMuZ2V0KCd0b2tlbicpIHx8ICcnOyAvLyDpu5jorqTlj4LmlbAKCiAgdmFyIGRlZmF1bHRzID0ge307IC8vIOmYsuatoue8k+WtmO+8jEdFVOivt+axgum7mOiupOW4pl905Y+C5pWwCgogIGlmIChjb25maWcubWV0aG9kID09PSAnZ2V0JykgewogICAgY29uZmlnLnBhcmFtcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY29uZmlnLnBhcmFtcyksIHsKICAgICAgJ190JzogbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgIH0pOwogIH0KCiAgaWYgKGlzUGxhaW5PYmplY3QoY29uZmlnLnBhcmFtcykpIHsKICAgIGNvbmZpZy5wYXJhbXMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRzKSwgY29uZmlnLnBhcmFtcyk7CiAgfQoKICBpZiAoaXNQbGFpbk9iamVjdChjb25maWcuZGF0YSkpIHsKICAgIGNvbmZpZy5kYXRhID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0cyksIGNvbmZpZy5kYXRhKTsKCiAgICBpZiAoL15hcHBsaWNhdGlvblwveC13d3ctZm9ybS11cmxlbmNvZGVkLy50ZXN0KGNvbmZpZy5oZWFkZXJzWydjb250ZW50LXR5cGUnXSkpIHsKICAgICAgY29uZmlnLmRhdGEgPSBxcy5zdHJpbmdpZnkoY29uZmlnLmRhdGEpOwogICAgfQogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7Ci8qKg0KICog5ZON5bqU5oum5oiqDQogKi8KCmh0dHAuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSA0MDEgfHwgcmVzcG9uc2UuZGF0YS5jb2RlID09PSAxMDAwMSkgewogICAgY2xlYXJMb2dpbkluZm8oKTsKICAgIHJvdXRlci5yZXBsYWNlKHsKICAgICAgbmFtZTogJ2xvZ2luJwogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzcG9uc2UuZGF0YS5tc2cpOwogIH0KCiAgcmV0dXJuIHJlc3BvbnNlOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBjb25zb2xlLmVycm9yKGVycm9yKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgaHR0cDs="},{"version":3,"sources":["E:/frontCode/security-enterprise-admin/src/utils/request.js"],"names":["axios","Cookies","router","qs","clearLoginInfo","isPlainObject","http","create","baseURL","window","SITE_CONFIG","timeout","withCredentials","interceptors","request","use","config","headers","get","defaults","method","params","Date","getTime","data","test","stringify","error","Promise","reject","response","code","replace","name","msg","console"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,SAASC,cAAT,QAA+B,SAA/B;AACA,OAAOC,aAAP,MAA0B,sBAA1B;AAEA,IAAMC,IAAI,GAAGN,KAAK,CAACO,MAAN,CAAa;AACxBC,EAAAA,OAAO,EAAEC,MAAM,CAACC,WAAP,CAAmB,QAAnB,CADe;AAExBC,EAAAA,OAAO,EAAE,OAAO,GAFQ;AAGxBC,EAAAA,eAAe,EAAE;AAHO,CAAb,CAAb;AAMA;;;;AAGAN,IAAI,CAACO,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAAC,MAAM,EAAI;AACtCA,EAAAA,MAAM,CAACC,OAAP,CAAe,iBAAf,IAAoChB,OAAO,CAACiB,GAAR,CAAY,UAAZ,KAA2B,OAA/D;AACAF,EAAAA,MAAM,CAACC,OAAP,CAAe,OAAf,IAA0BhB,OAAO,CAACiB,GAAR,CAAY,OAAZ,KAAwB,EAAlD,CAFsC,CAGtC;;AACA,MAAIC,QAAQ,GAAG,EAAf,CAJsC,CAKtC;;AACA,MAAIH,MAAM,CAACI,MAAP,KAAkB,KAAtB,EAA6B;AAC3BJ,IAAAA,MAAM,CAACK,MAAP,mCACKL,MAAM,CAACK,MADZ,GAEK;AAAE,YAAM,IAAIC,IAAJ,GAAWC,OAAX;AAAR,KAFL;AAID;;AACD,MAAIlB,aAAa,CAACW,MAAM,CAACK,MAAR,CAAjB,EAAkC;AAChCL,IAAAA,MAAM,CAACK,MAAP,mCACKF,QADL,GAEKH,MAAM,CAACK,MAFZ;AAID;;AACD,MAAIhB,aAAa,CAACW,MAAM,CAACQ,IAAR,CAAjB,EAAgC;AAC9BR,IAAAA,MAAM,CAACQ,IAAP,mCACKL,QADL,GAEKH,MAAM,CAACQ,IAFZ;;AAIA,QAAI,sCAAsCC,IAAtC,CAA2CT,MAAM,CAACC,OAAP,CAAe,cAAf,CAA3C,CAAJ,EAAgF;AAC9ED,MAAAA,MAAM,CAACQ,IAAP,GAAcrB,EAAE,CAACuB,SAAH,CAAaV,MAAM,CAACQ,IAApB,CAAd;AACD;AACF;;AACD,SAAOR,MAAP;AACD,CA5BD,EA4BG,UAAAW,KAAK,EAAI;AACV,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CA9BD;AAgCA;;;;AAGArB,IAAI,CAACO,YAAL,CAAkBiB,QAAlB,CAA2Bf,GAA3B,CAA+B,UAAAe,QAAQ,EAAI;AACzC,MAAIA,QAAQ,CAACN,IAAT,CAAcO,IAAd,KAAuB,GAAvB,IAA8BD,QAAQ,CAACN,IAAT,CAAcO,IAAd,KAAuB,KAAzD,EAAgE;AAC9D3B,IAAAA,cAAc;AACdF,IAAAA,MAAM,CAAC8B,OAAP,CAAe;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAf;AACA,WAAOL,OAAO,CAACC,MAAR,CAAeC,QAAQ,CAACN,IAAT,CAAcU,GAA7B,CAAP;AACD;;AACD,SAAOJ,QAAP;AACD,CAPD,EAOG,UAAAH,KAAK,EAAI;AACVQ,EAAAA,OAAO,CAACR,KAAR,CAAcA,KAAd;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAVD;AAYA,eAAerB,IAAf","sourcesContent":["import axios from 'axios'\r\nimport Cookies from 'js-cookie'\r\nimport router from '@/router'\r\nimport qs from 'qs'\r\nimport { clearLoginInfo } from '@/utils'\r\nimport isPlainObject from 'lodash/isPlainObject'\r\n\r\nconst http = axios.create({\r\n  baseURL: window.SITE_CONFIG['apiURL'],\r\n  timeout: 1000 * 180,\r\n  withCredentials: true\r\n})\r\n\r\n/**\r\n * 请求拦截\r\n */\r\nhttp.interceptors.request.use(config => {\r\n  config.headers['Accept-Language'] = Cookies.get('language') || 'zh-CN'\r\n  config.headers['token'] = Cookies.get('token') || ''\r\n  // 默认参数\r\n  var defaults = {}\r\n  // 防止缓存，GET请求默认带_t参数\r\n  if (config.method === 'get') {\r\n    config.params = {\r\n      ...config.params,\r\n      ...{ '_t': new Date().getTime() }\r\n    }\r\n  }\r\n  if (isPlainObject(config.params)) {\r\n    config.params = {\r\n      ...defaults,\r\n      ...config.params\r\n    }\r\n  }\r\n  if (isPlainObject(config.data)) {\r\n    config.data = {\r\n      ...defaults,\r\n      ...config.data\r\n    }\r\n    if (/^application\\/x-www-form-urlencoded/.test(config.headers['content-type'])) {\r\n      config.data = qs.stringify(config.data)\r\n    }\r\n  }\r\n  return config\r\n}, error => {\r\n  return Promise.reject(error)\r\n})\r\n\r\n/**\r\n * 响应拦截\r\n */\r\nhttp.interceptors.response.use(response => {\r\n  if (response.data.code === 401 || response.data.code === 10001) {\r\n    clearLoginInfo()\r\n    router.replace({ name: 'login' })\r\n    return Promise.reject(response.data.msg)\r\n  }\r\n  return response\r\n}, error => {\r\n  console.error(error)\r\n  return Promise.reject(error)\r\n})\r\n\r\nexport default http\r\n"]}]}