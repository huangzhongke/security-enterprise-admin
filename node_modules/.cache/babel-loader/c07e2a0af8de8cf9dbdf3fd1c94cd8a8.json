{"remainingRequest":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\src\\utils\\request.js","dependencies":[{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\src\\utils\\request.js","mtime":1595727761899},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\codeSpace\\security-enterprise-FrontBackSplit_2.7.0\\security-enterprise-2.7.0\\security-enterprise-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9jb2RlU3BhY2Uvc2VjdXJpdHktZW50ZXJwcmlzZS1Gcm9udEJhY2tTcGxpdF8yLjcuMC9zZWN1cml0eS1lbnRlcnByaXNlLTIuNy4wL3NlY3VyaXR5LWVudGVycHJpc2UtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgQ29va2llcyBmcm9tICdqcy1jb29raWUnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKaW1wb3J0IHFzIGZyb20gJ3FzJzsKaW1wb3J0IHsgY2xlYXJMb2dpbkluZm8gfSBmcm9tICdAL3V0aWxzJzsKaW1wb3J0IGlzUGxhaW5PYmplY3QgZnJvbSAnbG9kYXNoL2lzUGxhaW5PYmplY3QnOwp2YXIgaHR0cCA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogd2luZG93LlNJVEVfQ09ORklHWydhcGlVUkwnXSwKICB0aW1lb3V0OiAxMDAwICogMTgwLAogIHdpdGhDcmVkZW50aWFsczogdHJ1ZQp9KTsKLyoqCiAqIOivt+axguaLpuaIqgogKi8KCmh0dHAuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBjb25maWcuaGVhZGVyc1snQWNjZXB0LUxhbmd1YWdlJ10gPSBDb29raWVzLmdldCgnbGFuZ3VhZ2UnKSB8fCAnemgtQ04nOwogIGNvbmZpZy5oZWFkZXJzWyd0b2tlbiddID0gQ29va2llcy5nZXQoJ3Rva2VuJykgfHwgJyc7IC8vIOm7mOiupOWPguaVsAoKICB2YXIgZGVmYXVsdHMgPSB7fTsgLy8g6Ziy5q2i57yT5a2Y77yMR0VU6K+35rGC6buY6K6k5bimX3Tlj4LmlbAKCiAgaWYgKGNvbmZpZy5tZXRob2QgPT09ICdnZXQnKSB7CiAgICBjb25maWcucGFyYW1zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBjb25maWcucGFyYW1zKSwgewogICAgICAnX3QnOiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgfSk7CiAgfQoKICBpZiAoaXNQbGFpbk9iamVjdChjb25maWcucGFyYW1zKSkgewogICAgY29uZmlnLnBhcmFtcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdHMpLCBjb25maWcucGFyYW1zKTsKICB9CgogIGlmIChpc1BsYWluT2JqZWN0KGNvbmZpZy5kYXRhKSkgewogICAgY29uZmlnLmRhdGEgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRzKSwgY29uZmlnLmRhdGEpOwoKICAgIGlmICgvXmFwcGxpY2F0aW9uXC94LXd3dy1mb3JtLXVybGVuY29kZWQvLnRlc3QoY29uZmlnLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddKSkgewogICAgICBjb25maWcuZGF0YSA9IHFzLnN0cmluZ2lmeShjb25maWcuZGF0YSk7CiAgICB9CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKLyoqCiAqIOWTjeW6lOaLpuaIqgogKi8KCmh0dHAuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSA0MDEgfHwgcmVzcG9uc2UuZGF0YS5jb2RlID09PSAxMDAwMSkgewogICAgY2xlYXJMb2dpbkluZm8oKTsKICAgIHJvdXRlci5yZXBsYWNlKHsKICAgICAgbmFtZTogJ2xvZ2luJwogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzcG9uc2UuZGF0YS5tc2cpOwogIH0KCiAgcmV0dXJuIHJlc3BvbnNlOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBjb25zb2xlLmVycm9yKGVycm9yKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgaHR0cDs="},{"version":3,"sources":["D:/codeSpace/security-enterprise-FrontBackSplit_2.7.0/security-enterprise-2.7.0/security-enterprise-admin/src/utils/request.js"],"names":["axios","Cookies","router","qs","clearLoginInfo","isPlainObject","http","create","baseURL","window","SITE_CONFIG","timeout","withCredentials","interceptors","request","use","config","headers","get","defaults","method","params","Date","getTime","data","test","stringify","error","Promise","reject","response","code","replace","name","msg","console"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,SAASC,cAAT,QAA+B,SAA/B;AACA,OAAOC,aAAP,MAA0B,sBAA1B;AAEA,IAAMC,IAAI,GAAGN,KAAK,CAACO,MAAN,CAAa;AACxBC,EAAAA,OAAO,EAAEC,MAAM,CAACC,WAAP,CAAmB,QAAnB,CADe;AAExBC,EAAAA,OAAO,EAAE,OAAO,GAFQ;AAGxBC,EAAAA,eAAe,EAAE;AAHO,CAAb,CAAb;AAMA;;;;AAGAN,IAAI,CAACO,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAAC,MAAM,EAAI;AACtCA,EAAAA,MAAM,CAACC,OAAP,CAAe,iBAAf,IAAoChB,OAAO,CAACiB,GAAR,CAAY,UAAZ,KAA2B,OAA/D;AACAF,EAAAA,MAAM,CAACC,OAAP,CAAe,OAAf,IAA0BhB,OAAO,CAACiB,GAAR,CAAY,OAAZ,KAAwB,EAAlD,CAFsC,CAGtC;;AACA,MAAIC,QAAQ,GAAG,EAAf,CAJsC,CAKtC;;AACA,MAAIH,MAAM,CAACI,MAAP,KAAkB,KAAtB,EAA6B;AAC3BJ,IAAAA,MAAM,CAACK,MAAP,mCACKL,MAAM,CAACK,MADZ,GAEK;AAAE,YAAM,IAAIC,IAAJ,GAAWC,OAAX;AAAR,KAFL;AAID;;AACD,MAAIlB,aAAa,CAACW,MAAM,CAACK,MAAR,CAAjB,EAAkC;AAChCL,IAAAA,MAAM,CAACK,MAAP,mCACKF,QADL,GAEKH,MAAM,CAACK,MAFZ;AAID;;AACD,MAAIhB,aAAa,CAACW,MAAM,CAACQ,IAAR,CAAjB,EAAgC;AAC9BR,IAAAA,MAAM,CAACQ,IAAP,mCACKL,QADL,GAEKH,MAAM,CAACQ,IAFZ;;AAIA,QAAI,sCAAsCC,IAAtC,CAA2CT,MAAM,CAACC,OAAP,CAAe,cAAf,CAA3C,CAAJ,EAAgF;AAC9ED,MAAAA,MAAM,CAACQ,IAAP,GAAcrB,EAAE,CAACuB,SAAH,CAAaV,MAAM,CAACQ,IAApB,CAAd;AACD;AACF;;AACD,SAAOR,MAAP;AACD,CA5BD,EA4BG,UAAAW,KAAK,EAAI;AACV,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CA9BD;AAgCA;;;;AAGArB,IAAI,CAACO,YAAL,CAAkBiB,QAAlB,CAA2Bf,GAA3B,CAA+B,UAAAe,QAAQ,EAAI;AACzC,MAAIA,QAAQ,CAACN,IAAT,CAAcO,IAAd,KAAuB,GAAvB,IAA8BD,QAAQ,CAACN,IAAT,CAAcO,IAAd,KAAuB,KAAzD,EAAgE;AAC9D3B,IAAAA,cAAc;AACdF,IAAAA,MAAM,CAAC8B,OAAP,CAAe;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAf;AACA,WAAOL,OAAO,CAACC,MAAR,CAAeC,QAAQ,CAACN,IAAT,CAAcU,GAA7B,CAAP;AACD;;AACD,SAAOJ,QAAP;AACD,CAPD,EAOG,UAAAH,KAAK,EAAI;AACVQ,EAAAA,OAAO,CAACR,KAAR,CAAcA,KAAd;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAVD;AAYA,eAAerB,IAAf","sourcesContent":["import axios from 'axios'\nimport Cookies from 'js-cookie'\nimport router from '@/router'\nimport qs from 'qs'\nimport { clearLoginInfo } from '@/utils'\nimport isPlainObject from 'lodash/isPlainObject'\n\nconst http = axios.create({\n  baseURL: window.SITE_CONFIG['apiURL'],\n  timeout: 1000 * 180,\n  withCredentials: true\n})\n\n/**\n * 请求拦截\n */\nhttp.interceptors.request.use(config => {\n  config.headers['Accept-Language'] = Cookies.get('language') || 'zh-CN'\n  config.headers['token'] = Cookies.get('token') || ''\n  // 默认参数\n  var defaults = {}\n  // 防止缓存，GET请求默认带_t参数\n  if (config.method === 'get') {\n    config.params = {\n      ...config.params,\n      ...{ '_t': new Date().getTime() }\n    }\n  }\n  if (isPlainObject(config.params)) {\n    config.params = {\n      ...defaults,\n      ...config.params\n    }\n  }\n  if (isPlainObject(config.data)) {\n    config.data = {\n      ...defaults,\n      ...config.data\n    }\n    if (/^application\\/x-www-form-urlencoded/.test(config.headers['content-type'])) {\n      config.data = qs.stringify(config.data)\n    }\n  }\n  return config\n}, error => {\n  return Promise.reject(error)\n})\n\n/**\n * 响应拦截\n */\nhttp.interceptors.response.use(response => {\n  if (response.data.code === 401 || response.data.code === 10001) {\n    clearLoginInfo()\n    router.replace({ name: 'login' })\n    return Promise.reject(response.data.msg)\n  }\n  return response\n}, error => {\n  console.error(error)\n  return Promise.reject(error)\n})\n\nexport default http\n"]}]}