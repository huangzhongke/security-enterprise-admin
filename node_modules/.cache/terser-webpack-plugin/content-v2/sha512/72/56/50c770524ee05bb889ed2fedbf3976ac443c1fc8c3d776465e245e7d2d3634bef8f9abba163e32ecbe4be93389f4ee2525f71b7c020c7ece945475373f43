{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-7863e40a\"],{\"305b\":function(e,t,a){\"use strict\";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-dialog\",{attrs:{visible:e.visible,title:e.dataForm.id?e.$t(\"update\"):e.$t(\"add\"),\"close-on-click-modal\":!1,\"close-on-press-escape\":!1},on:{\"update:visible\":function(t){e.visible=t}}},[a(\"el-form\",{ref:\"dataForm\",attrs:{model:e.dataForm,rules:e.dataRule,\"label-width\":\"120px\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.dataFormSubmitHandle()}}},[a(\"el-form-item\",{attrs:{prop:\"type\",label:e.$t(\"menu.type\"),size:\"mini\"}},[a(\"el-radio-group\",{attrs:{disabled:!!e.dataForm.id},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,\"type\",t)},expression:\"dataForm.type\"}},[a(\"el-radio\",{attrs:{label:0}},[e._v(e._s(e.$t(\"menu.type0\")))]),a(\"el-radio\",{attrs:{label:1}},[e._v(e._s(e.$t(\"menu.type1\")))])],1)],1),a(\"el-form-item\",{attrs:{prop:\"name\",label:e.$t(\"menu.name\")}},[a(\"el-input\",{attrs:{placeholder:e.$t(\"menu.name\")},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,\"name\",t)},expression:\"dataForm.name\"}})],1),a(\"el-form-item\",{staticClass:\"menu-list\",attrs:{prop:\"parentName\",label:e.$t(\"menu.parentName\")}},[a(\"el-popover\",{ref:\"menuListPopover\",attrs:{placement:\"bottom-start\",trigger:\"click\"},model:{value:e.menuListVisible,callback:function(t){e.menuListVisible=t},expression:\"menuListVisible\"}},[a(\"el-tree\",{ref:\"menuListTree\",attrs:{data:e.menuList,props:{label:\"name\",children:\"children\"},\"node-key\":\"id\",\"highlight-current\":!0,\"expand-on-click-node\":!1,accordion:\"\"},on:{\"current-change\":e.menuListTreeCurrentChangeHandle}})],1),a(\"el-input\",{directives:[{name:\"popover\",rawName:\"v-popover:menuListPopover\",arg:\"menuListPopover\"}],attrs:{readonly:!0,placeholder:e.$t(\"menu.parentName\")},model:{value:e.dataForm.parentName,callback:function(t){e.$set(e.dataForm,\"parentName\",t)},expression:\"dataForm.parentName\"}},[\"0\"!==e.dataForm.pid?a(\"i\",{staticClass:\"el-icon-circle-close el-input__icon\",attrs:{slot:\"suffix\"},on:{click:function(t){return t.stopPropagation(),e.deptListTreeSetDefaultHandle()}},slot:\"suffix\"}):e._e()])],1),0===e.dataForm.type?a(\"el-form-item\",{attrs:{prop:\"url\",label:e.$t(\"menu.url\")}},[a(\"el-input\",{attrs:{placeholder:e.$t(\"menu.url\")},model:{value:e.dataForm.url,callback:function(t){e.$set(e.dataForm,\"url\",t)},expression:\"dataForm.url\"}})],1):e._e(),a(\"el-form-item\",{attrs:{prop:\"sort\",label:e.$t(\"menu.sort\")}},[a(\"el-input-number\",{attrs:{\"controls-position\":\"right\",min:0,label:e.$t(\"menu.sort\")},model:{value:e.dataForm.sort,callback:function(t){e.$set(e.dataForm,\"sort\",t)},expression:\"dataForm.sort\"}})],1),a(\"el-form-item\",{attrs:{prop:\"permissions\",label:e.$t(\"menu.permissions\")}},[a(\"el-input\",{attrs:{placeholder:e.$t(\"menu.permissionsTips\")},model:{value:e.dataForm.permissions,callback:function(t){e.$set(e.dataForm,\"permissions\",t)},expression:\"dataForm.permissions\"}})],1),0===e.dataForm.type?a(\"el-form-item\",{staticClass:\"icon-list\",attrs:{prop:\"icon\",label:e.$t(\"menu.icon\")}},[a(\"el-popover\",{ref:\"iconListPopover\",attrs:{placement:\"bottom-start\",trigger:\"click\",\"popper-class\":\"mod-sys__menu-icon-popover\"},model:{value:e.iconListVisible,callback:function(t){e.iconListVisible=t},expression:\"iconListVisible\"}},[a(\"div\",{staticClass:\"mod-sys__menu-icon-inner\"},[a(\"div\",{staticClass:\"mod-sys__menu-icon-list\"},e._l(e.iconList,(function(t,i){return a(\"el-button\",{key:i,class:{\"is-active\":e.dataForm.icon===t},on:{click:function(a){return e.iconListCurrentChangeHandle(t)}}},[a(\"svg\",{staticClass:\"icon-svg\",attrs:{\"aria-hidden\":\"true\"}},[a(\"use\",{attrs:{\"xlink:href\":\"#\"+t}})])])})),1)])]),a(\"el-input\",{directives:[{name:\"popover\",rawName:\"v-popover:iconListPopover\",arg:\"iconListPopover\"}],attrs:{readonly:!0,placeholder:e.$t(\"menu.icon\")},model:{value:e.dataForm.icon,callback:function(t){e.$set(e.dataForm,\"icon\",t)},expression:\"dataForm.icon\"}})],1):e._e()],1),a(\"template\",{slot:\"footer\"},[a(\"el-button\",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t(\"cancel\")))]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t(\"confirm\")))])],1)],2)},n=[],r=(a(\"b0c0\"),a(\"5530\")),o=a(\"b047\"),s=a.n(o),l=a(\"ed08\"),m={data:function(){return{visible:!1,menuList:[],menuListVisible:!1,iconList:[],iconListVisible:!1,dataForm:{id:\"\",type:0,name:\"\",pid:\"0\",parentName:\"\",url:\"\",permissions:\"\",sort:0,icon:\"\"}}},computed:{dataRule:function(){return{name:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],parentName:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"change\"}]}}},watch:{\"dataForm.type\":function(e){this.$refs[\"dataForm\"].clearValidate()}},methods:{init:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.$refs[\"dataForm\"].resetFields(),e.iconList=Object(l[\"d\"])(),e.dataForm.parentName=e.$t(\"menu.parentNameDefault\"),e.getMenuList().then((function(){e.dataForm.id&&e.getInfo()}))}))},getMenuList:function(){var e=this;return this.$http.get(\"/sys/menu/list?type=0\").then((function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.msg);e.menuList=a.data})).catch((function(){}))},getInfo:function(){var e=this;this.$http.get(\"/sys/menu/\".concat(this.dataForm.id)).then((function(t){var a=t.data;return 0!==a.code?e.$message.error(a.msg):(e.dataForm=Object(r[\"a\"])(Object(r[\"a\"])({},e.dataForm),a.data),\"0\"===e.dataForm.pid?e.deptListTreeSetDefaultHandle():void e.$refs.menuListTree.setCurrentKey(e.dataForm.pid))})).catch((function(){}))},deptListTreeSetDefaultHandle:function(){this.dataForm.pid=\"0\",this.dataForm.parentName=this.$t(\"menu.parentNameDefault\")},menuListTreeCurrentChangeHandle:function(e){this.dataForm.pid=e.id,this.dataForm.parentName=e.name,this.menuListVisible=!1},iconListCurrentChangeHandle:function(e){this.dataForm.icon=e,this.iconListVisible=!1},dataFormSubmitHandle:s()((function(){var e=this;this.$refs[\"dataForm\"].validate((function(t){if(!t)return!1;e.$http[e.dataForm.id?\"put\":\"post\"](\"/sys/menu\",e.dataForm).then((function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.msg);e.$message({message:e.$t(\"prompt.success\"),type:\"success\",duration:500,onClose:function(){e.visible=!1,e.$emit(\"refreshDataList\")}})})).catch((function(){}))}))}),1e3,{leading:!0,trailing:!1})}},c=m,u=(a(\"ed78\"),a(\"2877\")),d=Object(u[\"a\"])(c,i,n,!1,null,null,null);t[\"default\"]=d.exports},e6e0:function(e,t,a){},ed78:function(e,t,a){\"use strict\";var i=a(\"e6e0\"),n=a.n(i);n.a}}]);","extractedComments":[]}