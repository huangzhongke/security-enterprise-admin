{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-578a850d\",\"chunk-d2444130\",\"chunk-4b4fed95\",\"chunk-064867c7\",\"chunk-2d0b62ff\",\"chunk-2d0f1561\",\"chunk-2d0b6cf7\"],{\"1ba9\":function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-dialog\",{attrs:{visible:e.visible,title:e.dataForm.id?e.$t(\"update\"):e.$t(\"add\"),\"close-on-click-modal\":!1,\"close-on-press-escape\":!1},on:{\"update:visible\":function(t){e.visible=t}}},[a(\"el-form\",{ref:\"dataForm\",attrs:{model:e.dataForm,rules:e.dataRule,\"label-width\":\"120px\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.dataFormSubmitHandle()}}},[a(\"el-form-item\",{attrs:{prop:\"beanName\",label:e.$t(\"schedule.beanName\")}},[a(\"el-input\",{attrs:{disabled:!0},model:{value:e.dataForm.beanName,callback:function(t){e.$set(e.dataForm,\"beanName\",t)},expression:\"dataForm.beanName\"}})],1),a(\"el-form-item\",{attrs:{label:\"身份码\",\"label-width\":e.formLabelWidth,prop:\"authorization\"}},[a(\"el-input\",{attrs:{type:\"textarea\",row:10,autocomplete:\"off\"},model:{value:e.dataForm.authorization,callback:function(t){e.$set(e.dataForm,\"authorization\",t)},expression:\"dataForm.authorization\"}})],1),a(\"el-form-item\",{attrs:{label:\"起始港\",\"label-width\":e.formLabelWidth,prop:\"startPort.matched\"}},[a(\"el-select\",{attrs:{change:\"\",multiple:!1,filterable:\"\",remote:\"\",\"reserve-keyword\":\"\",placeholder:\"请输入关键词\",\"remote-method\":e.fromMethod,loading:e.selectFrom.loading},model:{value:e.dataForm.startPort.matched,callback:function(t){e.$set(e.dataForm.startPort,\"matched\",t)},expression:\"dataForm.startPort.matched\"}},e._l(e.selectFrom.options,(function(e){return a(\"el-option\",{key:e.id,attrs:{value:e.matched}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"目的港\",\"label-width\":e.formLabelWidth,prop:\"endPort.matched\"}},[a(\"el-select\",{attrs:{change:\"\",multiple:!1,filterable:\"\",remote:\"\",\"reserve-keyword\":\"\",placeholder:\"请输入关键词\",\"remote-method\":e.toMethod,loading:e.selectTo.loading},model:{value:e.dataForm.endPort.matched,callback:function(t){e.$set(e.dataForm.endPort,\"matched\",t)},expression:\"dataForm.endPort.matched\"}},e._l(e.selectTo.options,(function(e){return a(\"el-option\",{key:e.id,attrs:{value:e.matched}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"集装箱类型\",\"label-width\":e.formLabelWidth,prop:\"equipment\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.dataForm.equipment,callback:function(t){e.$set(e.dataForm,\"equipment\",t)},expression:\"dataForm.equipment\"}},e._l(e.equipmentType,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"数量\",\"label-width\":e.formLabelWidth,prop:\"quantity\"}},[a(\"el-input-number\",{attrs:{min:1,max:10,label:\"集装箱数量\"},model:{value:e.dataForm.quantity,callback:function(t){e.$set(e.dataForm,\"quantity\",e._n(t))},expression:\"dataForm.quantity\"}})],1),a(\"el-form-item\",{attrs:{label:\"etd时间\",\"label-width\":e.formLabelWidth,prop:\"etdDays\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.dataForm.etdDays,callback:function(t){e.$set(e.dataForm,\"etdDays\",e._n(\"string\"===typeof t?t.trim():t))},expression:\"dataForm.etdDays\"}})],1),a(\"el-form-item\",{attrs:{label:\"指定航名航次\",\"label-width\":e.formLabelWidth,prop:\"isNeedLineName\"}},[a(\"el-radio\",{attrs:{label:!0},model:{value:e.dataForm.isNeedLineName,callback:function(t){e.$set(e.dataForm,\"isNeedLineName\",t)},expression:\"dataForm.isNeedLineName\"}},[e._v(\"是\")]),a(\"el-radio\",{attrs:{label:!1},model:{value:e.dataForm.isNeedLineName,callback:function(t){e.$set(e.dataForm,\"isNeedLineName\",t)},expression:\"dataForm.isNeedLineName\"}},[e._v(\"否\")])],1),e.dataForm.isNeedLineName?a(\"el-form-item\",{attrs:{label:\"航名\",\"label-width\":e.formLabelWidth,prop:\"vesselName\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.dataForm.vesselName,callback:function(t){e.$set(e.dataForm,\"vesselName\",t)},expression:\"dataForm.vesselName\"}})],1):e._e(),e.dataForm.isNeedLineName?a(\"el-form-item\",{attrs:{label:\"航次\",\"label-width\":e.formLabelWidth,prop:\"voyage\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.dataForm.voyage,callback:function(t){e.$set(e.dataForm,\"voyage\",t)},expression:\"dataForm.voyage\"}})],1):e._e(),a(\"el-form-item\",{attrs:{label:\"指定航线代码\",\"label-width\":e.formLabelWidth,prop:\"isNeedSupplierName\"}},[a(\"el-radio\",{attrs:{label:!0},model:{value:e.dataForm.isNeedSupplierName,callback:function(t){e.$set(e.dataForm,\"isNeedSupplierName\",t)},expression:\"dataForm.isNeedSupplierName\"}},[e._v(\"是\")]),a(\"el-radio\",{attrs:{label:!1},model:{value:e.dataForm.isNeedSupplierName,callback:function(t){e.$set(e.dataForm,\"isNeedSupplierName\",t)},expression:\"dataForm.isNeedSupplierName\"}},[e._v(\"否\")])],1),e.dataForm.isNeedSupplierName?a(\"el-form-item\",{attrs:{label:\"航线代码\",\"label-width\":e.formLabelWidth,prop:\"supplierName\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.dataForm.supplierName,callback:function(t){e.$set(e.dataForm,\"supplierName\",t)},expression:\"dataForm.supplierName\"}})],1):e._e(),a(\"el-form-item\",{attrs:{label:\"使用代理\",\"label-width\":e.formLabelWidth,prop:\"isProxy\"}},[a(\"el-radio\",{attrs:{label:!0},model:{value:e.dataForm.isProxy,callback:function(t){e.$set(e.dataForm,\"isProxy\",t)},expression:\"dataForm.isProxy\"}},[e._v(\"是\")]),a(\"el-radio\",{attrs:{label:!1},model:{value:e.dataForm.isProxy,callback:function(t){e.$set(e.dataForm,\"isProxy\",t)},expression:\"dataForm.isProxy\"}},[e._v(\"否\")])],1),a(\"el-form-item\",{attrs:{label:\"填写收货人\",\"label-width\":e.formLabelWidth,prop:\"brokerageAddress\"}},[a(\"el-radio\",{attrs:{label:!0},model:{value:e.dataForm.isNeedConsigneeAddress,callback:function(t){e.$set(e.dataForm,\"isNeedConsigneeAddress\",t)},expression:\"dataForm.isNeedConsigneeAddress\"}},[e._v(\"是\")]),a(\"el-radio\",{attrs:{label:!1},model:{value:e.dataForm.isNeedConsigneeAddress,callback:function(t){e.$set(e.dataForm,\"isNeedConsigneeAddress\",t)},expression:\"dataForm.isNeedConsigneeAddress\"}},[e._v(\"否\")])],1),e.dataForm.isNeedConsigneeAddress?a(\"el-form-item\",{attrs:{label:\"收货人\",\"label-width\":e.formLabelWidth,prop:\"consigneeAddress.singleLine\"}},[a(\"el-select\",{attrs:{change:\"\",multiple:!1,filterable:\"\",remote:\"\",\"reserve-keyword\":\"\",placeholder:\"请输入关键词\",\"remote-method\":e.consigneeMethod,loading:e.selectConsignee.loading},model:{value:e.dataForm.consigneeAddress.companyName,callback:function(t){e.$set(e.dataForm.consigneeAddress,\"companyName\",t)},expression:\"dataForm.consigneeAddress.companyName\"}},e._l(e.selectConsignee.options,(function(e){return a(\"el-option\",{key:e.id,attrs:{value:e.companyName}})})),1)],1):e._e(),a(\"el-form-item\",{attrs:{label:\"填写通知人\",\"label-width\":e.formLabelWidth,prop:\"brokerageAddress\"}},[a(\"el-radio\",{attrs:{label:!0},model:{value:e.dataForm.isNeedNotifyAddress,callback:function(t){e.$set(e.dataForm,\"isNeedNotifyAddress\",t)},expression:\"dataForm.isNeedNotifyAddress\"}},[e._v(\"是\")]),a(\"el-radio\",{attrs:{label:!1},model:{value:e.dataForm.isNeedNotifyAddress,callback:function(t){e.$set(e.dataForm,\"isNeedNotifyAddress\",t)},expression:\"dataForm.isNeedNotifyAddress\"}},[e._v(\"否\")])],1),e.dataForm.isNeedNotifyAddress?a(\"el-form-item\",{attrs:{label:\"通知人\",\"label-width\":e.formLabelWidth,prop:\"notifyAddress.singleLine\"}},[a(\"el-select\",{attrs:{change:\"\",multiple:!1,filterable:\"\",remote:\"\",\"reserve-keyword\":\"\",placeholder:\"请输入关键词\",\"remote-method\":e.notifyMethod,loading:this.selectNotify.loading},model:{value:e.dataForm.notifyAddress.companyName,callback:function(t){e.$set(e.dataForm.notifyAddress,\"companyName\",t)},expression:\"dataForm.notifyAddress.companyName\"}},e._l(this.selectNotify.options,(function(e){return a(\"el-option\",{key:e.id,attrs:{value:e.companyName}})})),1)],1):e._e(),a(\"el-form-item\",{attrs:{label:\"货运代理\",\"label-width\":e.formLabelWidth,prop:\"brokerageAddress\"}},[a(\"el-radio\",{attrs:{label:!0},model:{value:e.dataForm.isNeedBrokerageAddress,callback:function(t){e.$set(e.dataForm,\"isNeedBrokerageAddress\",t)},expression:\"dataForm.isNeedBrokerageAddress\"}},[e._v(\"是\")]),a(\"el-radio\",{attrs:{label:!1},model:{value:e.dataForm.isNeedBrokerageAddress,callback:function(t){e.$set(e.dataForm,\"isNeedBrokerageAddress\",t)},expression:\"dataForm.isNeedBrokerageAddress\"}},[e._v(\"否\")])],1),a(\"el-form-item\",{attrs:{label:\"scac\",\"label-width\":e.formLabelWidth,prop:\"scac\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.dataForm.scac,callback:function(t){e.$set(e.dataForm,\"scac\",t)},expression:\"dataForm.scac\"}},e._l(e.scacType,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"下单间隔时间\",\"label-width\":e.formLabelWidth,prop:\"orderSleepTime\"}},[a(\"el-input-number\",{attrs:{min:0,max:10,label:\"下单间隔时间\"},model:{value:e.dataForm.orderSleepTime,callback:function(t){e.$set(e.dataForm,\"orderSleepTime\",e._n(t))},expression:\"dataForm.orderSleepTime\"}})],1),a(\"el-form-item\",{attrs:{label:\"可接受最大价格\",\"label-width\":e.formLabelWidth,prop:\"price\"}},[a(\"el-input-number\",{attrs:{min:0,max:99999},model:{value:e.dataForm.price,callback:function(t){e.$set(e.dataForm,\"price\",e._n(t))},expression:\"dataForm.price\"}})],1),a(\"el-form-item\",{attrs:{label:\"重量\",\"label-width\":e.formLabelWidth,prop:\"weight\"}},[a(\"el-input-number\",{attrs:{min:0,max:99999},model:{value:e.dataForm.weight,callback:function(t){e.$set(e.dataForm,\"weight\",t)},expression:\"dataForm.weight\"}})],1),a(\"el-form-item\",{attrs:{label:\"小提单号\",\"label-width\":e.formLabelWidth,prop:\"references\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.dataForm.references,callback:function(t){e.$set(e.dataForm,\"references\",\"string\"===typeof t?t.trim():t)},expression:\"dataForm.references\"}})],1),a(\"el-form-item\",{attrs:{label:\"账号\",\"label-width\":e.formLabelWidth,prop:\"account\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.dataForm.account,callback:function(t){e.$set(e.dataForm,\"account\",t)},expression:\"dataForm.account\"}},e._l(e.accountType,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{prop:\"cronExpression\",label:e.$t(\"schedule.cronExpression\")}},[a(\"el-popover\",{model:{value:e.cronPopover,callback:function(t){e.cronPopover=t},expression:\"cronPopover\"}},[a(\"cron\",{attrs:{i18n:\"cn\"},on:{change:e.changeCron,close:function(t){e.cronPopover=!1}}}),a(\"el-input\",{attrs:{slot:\"reference\",placeholder:e.$t(\"schedule.cronExpressionTips\")},on:{click:function(t){e.cronPopover=!0}},slot:\"reference\",model:{value:e.dataForm.cronExpression,callback:function(t){e.$set(e.dataForm,\"cronExpression\",t)},expression:\"dataForm.cronExpression\"}})],1)],1),a(\"el-form-item\",{attrs:{prop:\"remark\",label:e.$t(\"schedule.remark\")}},[a(\"el-input\",{attrs:{placeholder:e.$t(\"schedule.remark\")},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,\"remark\",t)},expression:\"dataForm.remark\"}})],1)],1),a(\"template\",{slot:\"footer\"},[a(\"el-button\",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t(\"cancel\")))]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t(\"confirm\")))])],1)],2)},r=[],l=(a(\"4160\"),a(\"159b\"),a(\"b047\")),i=a.n(l),n=a(\"117d\"),s=a(\"b775\");function d(e,t){return Object(s[\"a\"])({url:\"/one/startPort\",method:\"GET\",params:{authorization:e,startPort:t}})}function c(e,t,a){return Object(s[\"a\"])({url:\"/one/endPort\",method:\"GET\",params:{authorization:t,matched:e.matched,matchedCountry:e.matchedCountry,mode:e.mode,query:a}})}function m(e,t){return Object(s[\"a\"])({url:\"/one/addresses\",method:\"GET\",params:{authorization:e,query:t}})}var u={data:function(){return{selectFrom:{options:[],value:[],list:[],loading:!1},selectTo:{options:[],value:[],list:[],loading:!1},selectConsignee:{options:[],value:[],list:[],loading:!1},selectNotify:{options:[],value:[],list:[],loading:!1},visible:!1,accountType:[{value:0,label:\"环集美线\"},{value:1,label:\"泰博美线\"},{value:2,label:\"附属账号\"}],equipmentType:[{value:\"22G1\",label:\"DRY 20\"},{value:\"42G1\",label:\"DRY 40\"},{value:\"45G1\",label:\"DRY 40H\"},{value:\"L5G1\",label:\"DRY 45H\"},{value:\"45RD\",label:\"Reefer DRY 40H\"}],scacType:[{value:\"HSCP\",label:\"环集账号SCAC(HSCP)\"},{value:\"MFID\",label:\"泰博账号SCAC(MFID)\"},{value:\"NSIJ\",label:\"环集附属账号SCAC(NSIJ)\"}],dataForm:{beanName:\"\".concat(this.$route.params.crawlerName),params:\"{}\",cronExpression:\"0/5 * * * * ? *\",remark:\"\",status:0,account:0,startPort:{iata:\"\",matched:\"\",matchedCountry:\"\",mode:\"\",unCode:\"\",id:\"\"},endPort:{id:\"\",fmc:!0,iata:\"\",matched:\"\",matchedCountry:\"\",mode:\"\",unCode:\"\"},notifyAddress:{address1:\"\",cityTown:\"\",companyName:\"\",country:\"\",firstName:\"\",id:\"\",lastName:\"\",phone:\"\",singleLine:\"\",vatNo:\"\",postCode:\"\"},consigneeAddress:{address1:\"\",cityTown:\"\",companyName:\"\",country:\"\",firstName:\"\",id:\"\",lastName:\"\",phone:\"\",singleLine:\"\",vatNo:\"\",postCode:\"\"},isNeedBrokerageAddress:!1,isNeedNotifyAddress:!1,isNeedConsigneeAddress:!1,etdDays:0,isProxy:!1,isNeedLineName:!1,isNeedSupplierName:!1,equipment:\"\",quantity:1,vesselName:\"\",voyage:\"\",supplierName:\"\",orderSleepTime:0,authorization:\"\",references:\"\",scac:\"\",price:0,weight:16e3,type:0},cronPopover:!1,dialogTableVisible:!1,dialogFormVisible:!1,formLabelWidth:\"120px\"}},components:{cron:n[\"cron\"]},computed:{dataRule:function(){return{beanName:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],cronExpression:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],authorization:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],references:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],equipment:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],scac:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],\"startPort.matched\":[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],\"endPort.matched\":[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}]}}},watch:{\"dataForm.endPort.matched\":{deep:!0,handler:function(e,t){var a=this;this.selectTo.options.forEach((function(t){t.matched===e&&(a.dataForm.endPort=t)}))}},\"dataForm.startPort.matched\":{deep:!0,handler:function(e,t){var a=this;this.selectTo.options.forEach((function(t){t.matched===e&&(a.dataForm.endPort=t)}))}},\"dataForm.notifyAddress.companyName\":{deep:!0,handler:function(e,t){var a=this;this.selectNotify.options.forEach((function(t){t.companyName===e&&(a.dataForm.notifyAddress=t)}))}},\"dataForm.consigneeAddress.companyName\":{deep:!0,handler:function(e,t){var a=this;this.selectConsignee.options.forEach((function(t){t.companyName===e&&(a.dataForm.consigneeAddress=t)}))}}},methods:{fromMethod:function(e){var t=this;\"\"!==e?(this.selectFrom.loading=!0,setTimeout((function(){t.selectFrom.loading=!1,d(t.dataForm.authorization,e).then((function(e){\"\"===e.data&&alert(\"身份码失效 暂无数据\"),t.selectFrom.list=e.data.location||[],t.selectFrom.options=t.selectFrom.list}))}),100)):this.selectFrom.options=[]},toMethod:function(e){var t=this;\"\"!==e?(this.selectTo.loading=!0,this.selectFrom.options.forEach((function(e){e.matched===t.dataForm.startPort.matched&&(t.dataForm.startPort=e)})),setTimeout((function(){t.selectTo.loading=!1,c(t.dataForm.startPort,t.dataForm.authorization,e).then((function(e){t.selectTo.list=e.data.location||[],t.selectTo.options=t.selectTo.list}))}),100)):this.selectTo.options=[]},notifyMethod:function(e){var t=this;\"\"!==e?(this.selectNotify.loading=!0,setTimeout((function(){t.selectNotify.loading=!1,m(t.dataForm.authorization,e).then((function(e){t.selectNotify.list=e.data.address||[],t.selectNotify.options=t.selectNotify.list}))}),100)):this.selectNotify.options=[]},consigneeMethod:function(e){var t=this;\"\"!==e?(this.selectConsignee.loading=!0,setTimeout((function(){t.selectConsignee.loading=!1,m(t.dataForm.authorization,e).then((function(e){t.selectConsignee.list=e.data.address||[],t.selectConsignee.options=t.selectConsignee.list}))}),100)):this.selectConsignee.options=[]},init:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.$refs.dataForm.resetFields(),e.dataForm.id&&e.getInfo()}))},changeCron:function(e){this.dataForm.cronExpression=e},getInfo:function(){var e=this;this.$http.get(\"/sys/schedule/\".concat(this.dataForm.id)).then((function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.msg);e.dataForm=a.data,e.form=JSON.parse(a.data.params)})).catch((function(){}))},dataFormSubmitHandle:i()((function(){var e=this;this.$refs.dataForm.validate((function(t){if(!t)return!1;var a={tag:\"one\",data:JSON.stringify(e.dataForm)};e.$http[e.dataForm.id?\"put\":\"post\"](\"/sys/schedule\",a).then((function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.msg);e.$message({message:e.$t(\"prompt.success\"),type:\"success\",duration:500,onClose:function(){e.visible=!1,e.$emit(\"refreshDataList\")}})})).catch((function(){}))}))}),1e3,{leading:!0,trailing:!1})}},p=u,h=a(\"2877\"),f=Object(h[\"a\"])(p,o,r,!1,null,null,null);t[\"default\"]=f.exports},\"1f6b\":function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-dialog\",{attrs:{visible:e.visible,title:e.$t(\"下单列表\"),\"close-on-click-modal\":!1,\"close-on-press-escape\":!1,width:\"75%\"},on:{\"update:visible\":function(t){e.visible=t}}},[a(\"el-form\",{attrs:{inline:!0,model:e.dataForm},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.getDataList()}}},[a(\"el-form-item\",[a(\"el-input\",{attrs:{placeholder:e.$t(\"下单Id\"),clearable:\"\"},model:{value:e.dataForm.id,callback:function(t){e.$set(e.dataForm,\"id\",t)},expression:\"dataForm.id\"}})],1),a(\"el-form-item\",[a(\"el-button\",{on:{click:function(t){return e.getDataList()}}},[e._v(e._s(e.$t(\"query\")))])],1)],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.dataListLoading,expression:\"dataListLoading\"}],staticStyle:{width:\"100%\"},attrs:{data:e.dataList,border:\"\",height:\"460\"},on:{\"sort-change\":e.dataListSortChangeHandle}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:e.$t(\"下单Id\"),\"header-align\":\"center\",align:\"left\",width:\"80\"}}),a(\"el-table-column\",{attrs:{prop:\"startPort\",label:e.$t(\"起始港口\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{prop:\"endPort\",label:e.$t(\"目的港口\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{formatter:e.formatterEquipment,prop:\"equipment\",label:e.$t(\"柜子类型\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{prop:\"quantity\",label:e.$t(\"数量\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{prop:\"orderSleepTime\",label:e.$t(\"休眠时间\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{prop:\"orderDate\",label:e.$t(\"下单时间\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{formatter:e.formatterProxy,prop:\"isProxy\",label:e.$t(\"使用代理\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{formatter:e.formatterSupplierName,prop:\"isNeedSupplierName\",label:e.$t(\"是否指定供应商\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{formatter:e.formatterLineName,prop:\"isNeedLineName\",label:e.$t(\"是否指定航名航次\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{prop:\"supplierName\",label:e.$t(\"供应商名\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{prop:\"vessel\",label:e.$t(\"航线名\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{prop:\"voyage\",label:e.$t(\"航次\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{formatter:e.formatterAccount,prop:\"account\",label:e.$t(\"下单账号\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{prop:\"etd\",label:e.$t(\"ETD\"),\"header-align\":\"center\",align:\"left\"}}),a(\"el-table-column\",{attrs:{prop:\"reference\",label:e.$t(\"小提单号\"),\"header-align\":\"center\",align:\"left\"}})],1),a(\"el-pagination\",{attrs:{\"current-page\":e.page,\"page-sizes\":[10,20,50,100],\"page-size\":e.limit,total:e.total,layout:\"total, sizes, prev, pager, next, jumper\"},on:{\"size-change\":e.pageSizeChangeHandle,\"current-change\":e.pageCurrentChangeHandle}})],1)},r=[],l=a(\"e1a5\"),i={mixins:[l[\"a\"]],data:function(){return{visible:!1,mixinViewModuleOptions:{getDataListURL:\"/sys/schedule/order/page\",getDataListIsPage:!0},dataForm:{id:\"\"}}},methods:{init:function(){this.visible=!0,this.getDataList()},formatterProxy:function(e,t){return!0===e.isProxy?\"是\":\"否\"},formatterSupplierName:function(e,t){return!0===e.isNeedSupplierName?\"是\":\"否\"},formatterLineName:function(e,t){return!0===e.isNeedLineName?\"是\":\"否\"},formatterAccount:function(e,t){return 0===e.account?\"环集账号\":1===t?\"泰博账号\":2===t?\"环集附属账号\":void 0},formatterEquipment:function(e,t){return\"22G1\"===e.equipment?\"20GP\":\"42G1\"===e.equipment?\"40GP\":\"45G1\"===e.equipment?\"40HQ\":\"L5G1\"===e.equipment?\"45HQ\":\"45RD\"===e.equipment?\"NOR\":void 0}}},n=i,s=a(\"2877\"),d=Object(s[\"a\"])(n,o,r,!1,null,null,null);t[\"default\"]=d.exports},\"2bdd\":function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return r})),a.d(t,\"c\",(function(){return l})),a.d(t,\"b\",(function(){return i}));var o=a(\"b775\");function r(e,t){return Object(o[\"a\"])({url:\"/spider/account/oocl\",method:\"GET\",params:{isOrderAccount:e,type:t}})}function l(e){return Object(o[\"a\"])({url:\"/oocl/login\",method:\"POST\",data:{username:e}})}function i(e,t,a){return Object(o[\"a\"])({url:\"/oocl/port\",method:\"POST\",data:{cityFullName:e,cookieValue:t,tokenValue:a}})}},\"73c9\":function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-dialog\",{attrs:{visible:e.visible,title:e.dataForm.id?e.$t(\"update\"):e.$t(\"add\"),\"close-on-click-modal\":!1,\"close-on-press-escape\":!1},on:{\"update:visible\":function(t){e.visible=t}}},[a(\"el-form\",{ref:\"dataForm\",attrs:{model:e.dataForm,rules:e.dataRule,\"label-width\":\"120px\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.dataFormSubmitHandle()}}},[a(\"el-form-item\",{attrs:{prop:\"beanName\",label:e.$t(\"schedule.beanName\")}},[a(\"el-input\",{attrs:{disabled:!0},model:{value:e.dataForm.beanName,callback:function(t){e.$set(e.dataForm,\"beanName\",t)},expression:\"dataForm.beanName\"}})],1),a(\"el-form-item\",{attrs:{label:\"账号选择\",\"label-width\":e.formLabelWidth,prop:\"account\"}},[a(\"el-select\",{staticClass:\"m-2\",attrs:{clearable:\"\",placeholder:\"Select\",size:\"large\"},model:{value:e.dataForm.account,callback:function(t){e.$set(e.dataForm,\"account\",t)},expression:\"dataForm.account\"}},e._l(e.accountList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.user,value:e.user}})})),1),a(\"el-button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"primary\",loading:e.isCommitLogin,disabled:\"\"===e.dataForm.account},on:{click:e.login}},[e._v(\"登录 \")])],1),a(\"el-form-item\",{attrs:{label:\"起始港\",\"label-width\":e.formLabelWidth,prop:\"startPort.cityFullNameEn\"}},[a(\"el-select\",{attrs:{change:\"\",multiple:!1,filterable:\"\",remote:\"\",\"reserve-keyword\":\"\",placeholder:\"请输入关键词\",\"remote-method\":e.getStartPort,loading:e.selectFrom.loading},model:{value:e.showStartPortName,callback:function(t){e.showStartPortName=t},expression:\"showStartPortName\"}},e._l(e.selectFrom.options,(function(e){return a(\"el-option\",{key:e.id,attrs:{value:e.cityFullNameCn+\"-\"+e.cityFullNameEn}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"目的港\",\"label-width\":e.formLabelWidth,prop:\"endPort.cityFullNameEn\"}},[a(\"el-select\",{attrs:{change:\"\",multiple:!1,filterable:\"\",remote:\"\",\"reserve-keyword\":\"\",placeholder:\"请输入关键词\",\"remote-method\":e.getEndPort,loading:e.selectTo.loading},model:{value:e.showEndPortName,callback:function(t){e.showEndPortName=t},expression:\"showEndPortName\"}},e._l(e.selectTo.options,(function(e){return a(\"el-option\",{key:e.id,attrs:{value:e.cityFullNameCn+\"-\"+e.cityFullNameEn}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"冷箱频道\",\"label-width\":e.formLabelWidth,prop:\"isColdType\"}},[a(\"el-radio\",{attrs:{label:!0},model:{value:e.dataForm.isColdType,callback:function(t){e.$set(e.dataForm,\"isColdType\",t)},expression:\"dataForm.isColdType\"}},[e._v(\"是\")]),a(\"el-radio\",{attrs:{label:!1},model:{value:e.dataForm.isColdType,callback:function(t){e.$set(e.dataForm,\"isColdType\",t)},expression:\"dataForm.isColdType\"}},[e._v(\"否\")])],1),a(\"el-form-item\",{attrs:{label:\"集装箱类型\",\"label-width\":e.formLabelWidth,prop:\"equipment\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.dataForm.equipment,callback:function(t){e.$set(e.dataForm,\"equipment\",t)},expression:\"dataForm.equipment\"}},e._l(e.equipmentType,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"数量\",\"label-width\":e.formLabelWidth,prop:\"quantity\"}},[a(\"el-input-number\",{attrs:{min:1,max:100,label:\"集装箱数量\"},model:{value:e.dataForm.quantity,callback:function(t){e.$set(e.dataForm,\"quantity\",e._n(t))},expression:\"dataForm.quantity\"}})],1),a(\"el-form-item\",{attrs:{label:\"指定航名航次\",\"label-width\":e.formLabelWidth,prop:\"isNeedVesselName\"}},[a(\"el-radio\",{attrs:{label:!0},model:{value:e.dataForm.isNeedVesselName,callback:function(t){e.$set(e.dataForm,\"isNeedVesselName\",t)},expression:\"dataForm.isNeedVesselName\"}},[e._v(\"是\")]),a(\"el-radio\",{attrs:{label:!1},model:{value:e.dataForm.isNeedVesselName,callback:function(t){e.$set(e.dataForm,\"isNeedVesselName\",t)},expression:\"dataForm.isNeedVesselName\"}},[e._v(\"否\")])],1),e.dataForm.isNeedVesselName?a(\"el-form-item\",{attrs:{label:\"航名\",\"label-width\":e.formLabelWidth,prop:\"vesselName\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.dataForm.vesselName,callback:function(t){e.$set(e.dataForm,\"vesselName\",t)},expression:\"dataForm.vesselName\"}})],1):e._e(),e.dataForm.isNeedVesselName?a(\"el-form-item\",{attrs:{label:\"航次\",\"label-width\":e.formLabelWidth,prop:\"voyage\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.dataForm.voyage,callback:function(t){e.$set(e.dataForm,\"voyage\",t)},expression:\"dataForm.voyage\"}})],1):e._e(),a(\"el-form-item\",{attrs:{label:\"可接受最大价格\",\"label-width\":e.formLabelWidth,prop:\"price\"}},[a(\"el-input-number\",{attrs:{min:0,max:99999},model:{value:e.dataForm.price,callback:function(t){e.$set(e.dataForm,\"price\",e._n(t))},expression:\"dataForm.price\"}})],1),a(\"el-form-item\",{attrs:{label:\"预计开航时间\"}},[a(\"el-col\",{attrs:{span:11}},[a(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",placeholder:\"最早开航时间\"},model:{value:e.dataForm.startDate,callback:function(t){e.$set(e.dataForm,\"startDate\",t)},expression:\"dataForm.startDate\"}})],1),a(\"el-col\",{staticClass:\"line\",attrs:{span:2}},[e._v(\"-\")]),a(\"el-col\",{attrs:{span:11}},[a(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",placeholder:\"最晚开航时间\"},model:{value:e.dataForm.endDate,callback:function(t){e.$set(e.dataForm,\"endDate\",t)},expression:\"dataForm.endDate\"}})],1)],1),a(\"el-form-item\",{attrs:{label:\"搜索子账号\",\"label-width\":e.formLabelWidth,prop:\"orderAccount\"}},[a(\"el-select\",{attrs:{multiple:\"\",placeholder:\"请选择\"},model:{value:e.dataForm.childAccount,callback:function(t){e.$set(e.dataForm,\"childAccount\",t)},expression:\"dataForm.childAccount\"}},e._l(e.childAccountList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.user,value:e.user}})})),1)],1),a(\"el-form-item\",{attrs:{prop:\"cronExpression\",label:e.$t(\"schedule.cronExpression\")}},[a(\"el-popover\",{model:{value:e.cronPopover,callback:function(t){e.cronPopover=t},expression:\"cronPopover\"}},[a(\"cron\",{attrs:{i18n:\"cn\"},on:{change:e.changeCron,close:function(t){e.cronPopover=!1}}}),a(\"el-input\",{attrs:{slot:\"reference\",placeholder:e.$t(\"schedule.cronExpressionTips\")},on:{click:function(t){e.cronPopover=!0}},slot:\"reference\",model:{value:e.dataForm.cronExpression,callback:function(t){e.$set(e.dataForm,\"cronExpression\",t)},expression:\"dataForm.cronExpression\"}})],1)],1),a(\"el-form-item\",{attrs:{prop:\"remark\",label:e.$t(\"schedule.remark\")}},[a(\"el-input\",{attrs:{placeholder:e.$t(\"schedule.remark\")},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,\"remark\",t)},expression:\"dataForm.remark\"}})],1)],1),a(\"template\",{slot:\"footer\"},[a(\"el-button\",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t(\"cancel\")))]),a(\"el-button\",{attrs:{loading:e.isCommitForm,type:\"primary\"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t(\"confirm\")))])],1)],2)},r=[],l=(a(\"4160\"),a(\"159b\"),a(\"b047\")),i=a.n(l),n=a(\"117d\"),s=a(\"2bdd\"),d={data:function(){return{visible:!1,showStartPortName:\"\",showEndPortName:\"\",dataForm:{beanName:\"\".concat(this.$route.params.crawlerName),params:\"{}\",cronExpression:\"0/2 * * * * ? *\",remark:\"\",status:0,startPort:{bookingTerritory:\"\",cityFullNameCn:\"\",cityFullNameEn:\"\",cityName:\"\",equalsScore:\"\",id:\"\",isActive:\"\",orderScore:\"\",stateCode:\"\",stateName:\"\",unlocode:\"\",updateTime:\"\"},endPort:{bookingTerritory:\"\",cityFullNameCn:\"\",cityFullNameEn:\"\",cityName:\"\",equalsScore:\"\",id:\"\",isActive:\"\",orderScore:\"\",stateCode:\"\",stateName:\"\",unlocode:\"\",updateTime:\"\"},equipment:\"\",vesselName:\"\",voyage:\"\",quantity:1,price:0,account:\"\",cookie:\"\",token:\"\",startDate:\"\",endDate:\"\",childAccount:[],isNeedVesselName:!1,type:1,isColdType:!1},cronPopover:!1,dialogTableVisible:!1,dialogFormVisible:!1,isCommitLogin:!1,isCommitForm:!1,formLabelWidth:\"120px\",selectFrom:{options:[],value:[],list:[],loading:!1},selectTo:{options:[],value:[],list:[],loading:!1},equipmentType:[{value:\"20GP\",label:\"20GP\"},{value:\"40GP\",label:\"40GP\"},{value:\"40HQ\",label:\"40HQ\"},{value:\"20RF\",label:\"20RF\"},{value:\"40RQ\",label:\"40RQ\"}],accountList:[],childAccountList:[]}},components:{cron:n[\"cron\"]},computed:{dataRule:function(){return{beanName:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],cronExpression:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],account:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],showStartPortName:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],showEndPortName:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],equipment:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],startDate:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],childAccount:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}]}}},watch:{deep:!0,showStartPortName:function(e,t){var a=this;this.selectFrom.options.forEach((function(t){t.cityFullNameCn+\"-\"+t.cityFullNameEn===e&&(a.dataForm.startPort=t)}))},showEndPortName:function(e,t){var a=this;this.selectTo.options.forEach((function(t){t.cityFullNameCn+\"-\"+t.cityFullNameEn===e&&(a.dataForm.endPort=t)}))}},methods:{getStartPort:function(e){var t=this;\"\"!==e?(this.selectFrom.loading=!0,setTimeout((function(){t.selectFrom.loading=!1,console.log(t.dataForm.cookie),Object(s[\"b\"])(e,t.dataForm.cookie,t.dataForm.token).then((function(e){var a=e.data;\"\"===a.data&&t.$message.info(\"未搜索到结果\"),t.selectFrom.list=a.data||[],t.selectFrom.options=t.selectFrom.list}))}),50)):this.selectFrom.options=[]},getEndPort:function(e){var t=this;\"\"!==e?(this.selectTo.loading=!0,setTimeout((function(){t.selectTo.loading=!1,Object(s[\"b\"])(e,t.dataForm.cookie,t.dataForm.token).then((function(e){var a=e.data;\"\"===a.data&&t.$message.info(\"未搜索到结果\"),t.selectTo.list=a.data||[],t.selectTo.options=t.selectTo.list}))}),50)):this.selectFrom.options=[]},login:function(){var e=this;this.isCommitLogin=!0,Object(s[\"c\"])(this.dataForm.account).then((function(t){var a=t.data;0===a.code?(e.$message.success(\"登陆成功\"),e.dataForm.cookie=a.data.cookie,e.dataForm.token=a.data.token):e.$message.error(\"登陆失败\"),e.isCommitLogin=!1}))},init:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.showStartPortName=\"\",e.showEndPortName=\"\",e.dataForm.startDate=\"\",e.dataForm.endDate=\"\",e.dataForm.childAccount=[],e.$refs.dataForm.resetFields(),e.dataForm.id&&e.getInfo()}))},changeCron:function(e){this.dataForm.cronExpression=e},getInfo:function(){var e=this;this.$http.get(\"/sys/schedule/\".concat(this.dataForm.id)).then((function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.msg);e.dataForm=a.data,e.showStartPortName=e.dataForm.startPort.cityFullNameCn+\"-\"+e.dataForm.startPort.cityFullNameEn,e.showEndPortName=e.dataForm.endPort.cityFullNameCn+\"-\"+e.dataForm.endPort.cityFullNameEn})).catch((function(){}))},dataFormSubmitHandle:i()((function(){var e=this;this.$refs.dataForm.validate((function(t){if(!t)return!1;var a={tag:\"oocl\",data:JSON.stringify(e.dataForm)};e.isCommitForm=!0,e.$http[e.dataForm.id?\"put\":\"post\"](\"/sys/schedule\",a).then((function(t){var a=t.data;if(0!==a.code)return e.visible=!1,e.$message.error(a.msg);e.$message({message:e.$t(\"prompt.success\"),type:\"success\",duration:500,onClose:function(){e.visible=!1,e.$emit(\"refreshDataList\")}}),e.isCommitForm=!1})).catch((function(){}))}))}),1e3,{leading:!0,trailing:!1})},mounted:function(){var e=this;Object(s[\"a\"])(!0,0).then((function(t){var a=t.data;e.accountList=a.data})),Object(s[\"a\"])(!1,0).then((function(t){var a=t.data;e.childAccountList=a.data})),this.dataForm.cookie=\"\",this.dataForm.token=\"\"}},c=d,m=a(\"2877\"),u=Object(m[\"a\"])(c,o,r,!1,null,null,null);t[\"default\"]=u.exports},\"975e\":function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-card\",{staticClass:\"aui-card--fill\",attrs:{shadow:\"never\"}},[a(\"div\",{staticClass:\"mod-job__schedule\"},[a(\"el-form\",{attrs:{inline:!0,model:e.dataForm},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.getDataList()}}},[a(\"el-form-item\",[a(\"el-input\",{attrs:{placeholder:e.$t(\"schedule.beanName\"),clearable:\"\"},model:{value:e.dataForm.beanName,callback:function(t){e.$set(e.dataForm,\"beanName\",t)},expression:\"dataForm.beanName\"}})],1),a(\"el-form-item\",[a(\"el-button\",{on:{click:function(t){return e.getDataList()}}},[e._v(e._s(e.$t(\"query\")))])],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.addOrUpdateHandle()}}},[e._v(e._s(e.$t(\"add\")))])],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){return e.deleteHandle()}}},[e._v(e._s(e.$t(\"deleteBatch\")))])],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){return e.pauseHandle()}}},[e._v(e._s(e.$t(\"schedule.pauseBatch\")))])],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){return e.resumeHandle()}}},[e._v(e._s(e.$t(\"schedule.resumeBatch\")))])],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){return e.runHandle()}}},[e._v(e._s(e.$t(\"schedule.runBatch\")))])],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"success\"},on:{click:function(t){return e.logHandle()}}},[e._v(e._s(e.$t(\"schedule.log\")))])],1),e.showOrderList?a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"success\"},on:{click:function(t){return e.orderHandle()}}},[e._v(e._s(e.$t(\"下单列表\")))])],1):e._e(),e.showOrderList?a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"info\"},on:{click:function(t){return e.exportHandle()}}},[e._v(e._s(e.$t(\"export\")))])],1):e._e()],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.dataListLoading,expression:\"dataListLoading\"}],staticStyle:{width:\"100%\"},attrs:{data:e.temp,border:\"\"},on:{\"selection-change\":e.dataListSelectionChangeHandle,\"sort-change\":e.dataListSortChangeHandle}},[a(\"el-table-column\",{attrs:{type:\"selection\",\"header-align\":\"center\",align:\"center\",width:\"50\"}}),a(\"el-table-column\",{attrs:{prop:\"beanName\",label:e.$t(\"schedule.beanName\"),\"header-align\":\"center\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"params\",label:e.$t(\"schedule.params\"),\"header-align\":\"center\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"cronExpression\",label:e.$t(\"schedule.cronExpression\"),\"header-align\":\"center\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"remark\",label:e.$t(\"schedule.remark\"),\"header-align\":\"center\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"status\",label:e.$t(\"schedule.status\"),sortable:\"custom\",\"header-align\":\"center\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[1===t.row.status?a(\"el-tag\",{attrs:{size:\"small\"}},[e._v(e._s(e.$t(\"schedule.status1\")))]):a(\"el-tag\",{attrs:{size:\"small\",type:\"danger\"}},[e._v(e._s(e.$t(\"schedule.status0\")))])]}}])}),a(\"el-table-column\",{attrs:{label:e.$t(\"handle\"),fixed:\"right\",\"header-align\":\"center\",align:\"center\",width:\"150\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){return e.addOrUpdateHandle(t.row.id)}}},[e._v(e._s(e.$t(\"update\")))]),a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){return e.pauseHandle(t.row.id)}}},[e._v(e._s(e.$t(\"schedule.pause\")))]),a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){return e.resumeHandle(t.row.id)}}},[e._v(e._s(e.$t(\"schedule.resume\")))]),a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){return e.runHandle(t.row.id)}}},[e._v(e._s(e.$t(\"schedule.run\")))]),a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){return e.deleteHandle(t.row.id)}}},[e._v(e._s(e.$t(\"delete\")))])]}}])})],1),a(\"el-pagination\",{attrs:{\"current-page\":e.page,\"page-sizes\":[10,20,50,100],\"page-size\":e.limit,total:e.total,layout:\"total, sizes, prev, pager, next, jumper\"},on:{\"size-change\":e.pageSizeChangeHandle,\"current-change\":e.pageCurrentChangeHandle}}),e.oneVisible?a(\"add-or-update-one\",{ref:\"addOrUpdateOne\",on:{refreshDataList:e.getDataList}}):e._e(),e.ooclVisible?a(\"add-or-update-oocl\",{ref:\"addOrUpdateOocl\",on:{refreshDataList:e.getDataList}}):e._e(),e.coscoVisible?a(\"add-or-update-cosco\",{ref:\"addOrUpdateCosco\",on:{refreshDataList:e.getDataList}}):e._e(),e.monitorVisible?a(\"add-or-update-monitor\",{ref:\"addOrUpdateMonitor\",on:{refreshDataList:e.getDataList}}):e._e(),e.logVisible?a(\"log\",{ref:\"log\"}):e._e(),e.orderVisible?a(\"OneOrder\",{ref:\"order\"}):e._e()],1)])},r=[],l=(a(\"d81d\"),a(\"e1a5\")),i=a(\"1ba9\"),n=a(\"73c9\"),s=a(\"d8da\"),d=a(\"b62b\"),c=a(\"9fca\"),m=a(\"1f6b\"),u={mixins:[l[\"a\"]],data:function(){return{mixinViewModuleOptions:{getDataListURL:\"/sys/schedule/page\",getDataListIsPage:!0,deleteURL:\"/sys/schedule\",deleteIsBatch:!0,exportURL:\"/sys/schedule/order/export\"},dataForm:{beanName:\"\",type:this.getType()},logVisible:!1,orderVisible:!1,oneVisible:!1,ooclVisible:!1,coscoVisible:!1,monitorVisible:!1,showOrderList:!1}},beforeMount:function(){\"one\"===this.$route.params.crawlerType&&(this.showOrderList=!0)},components:{AddOrUpdateOne:i[\"default\"],Log:c[\"default\"],AddOrUpdateOocl:n[\"default\"],OneOrder:m[\"default\"],AddOrUpdateCosco:s[\"default\"],AddOrUpdateMonitor:d[\"default\"]},methods:{pauseHandle:function(e){var t=this;if(!e&&this.dataListSelections.length<=0)return this.$message({message:this.$t(\"prompt.deleteBatch\"),type:\"warning\",duration:500});this.$confirm(this.$t(\"prompt.info\",{handle:this.$t(\"schedule.pause\")}),this.$t(\"prompt.title\"),{confirmButtonText:this.$t(\"confirm\"),cancelButtonText:this.$t(\"cancel\"),type:\"warning\"}).then((function(){t.$http.put(\"/sys/schedule/pause\",e?[e]:t.dataListSelections.map((function(e){return e.id}))).then((function(e){var a=e.data;if(0!==a.code)return t.$message.error(a.msg);t.$message({message:t.$t(\"prompt.success\"),type:\"success\",duration:500,onClose:function(){t.getDataList()}})})).catch((function(){}))})).catch((function(){}))},resumeHandle:function(e){var t=this;if(!e&&this.dataListSelections.length<=0)return this.$message({message:this.$t(\"prompt.deleteBatch\"),type:\"warning\",duration:500});this.$confirm(this.$t(\"prompt.info\",{handle:this.$t(\"schedule.resume\")}),this.$t(\"prompt.title\"),{confirmButtonText:this.$t(\"confirm\"),cancelButtonText:this.$t(\"cancel\"),type:\"warning\"}).then((function(){t.$http.put(\"/sys/schedule/resume\",e?[e]:t.dataListSelections.map((function(e){return e.id}))).then((function(e){var a=e.data;if(0!==a.code)return t.$message.error(a.msg);t.$message({message:t.$t(\"prompt.success\"),type:\"success\",duration:500,onClose:function(){t.getDataList()}})})).catch((function(){}))})).catch((function(){}))},runHandle:function(e){var t=this;if(!e&&this.dataListSelections.length<=0)return this.$message({message:this.$t(\"prompt.deleteBatch\"),type:\"warning\",duration:500});this.$confirm(this.$t(\"prompt.info\",{handle:this.$t(\"schedule.run\")}),this.$t(\"prompt.title\"),{confirmButtonText:this.$t(\"confirm\"),cancelButtonText:this.$t(\"cancel\"),type:\"warning\"}).then((function(){t.$http.put(\"/sys/schedule/run\",e?[e]:t.dataListSelections.map((function(e){return e.id}))).then((function(e){var a=e.data;if(0!==a.code)return t.$message.error(a.msg);t.$message({message:t.$t(\"prompt.success\"),type:\"success\",duration:500,onClose:function(){t.getDataList()}})})).catch((function(){}))})).catch((function(){}))},addOrUpdateHandle:function(e){var t=this;\"one\"===this.$route.params.crawlerType?(this.oneVisible=!0,this.$nextTick((function(){t.$refs.addOrUpdateOne.dataForm.id=e,t.$refs.addOrUpdateOne.init()}))):\"oocl\"===this.$route.params.crawlerType?(this.ooclVisible=!0,this.$nextTick((function(){t.$refs.addOrUpdateOocl.dataForm.id=e,t.$refs.addOrUpdateOocl.init()}))):\"cosco\"===this.$route.params.crawlerType?(this.coscoVisible=!0,this.$nextTick((function(){t.$refs.addOrUpdateCosco.dataForm.id=e,t.$refs.addOrUpdateCosco.init()}))):\"monitor\"===this.$route.params.crawlerType&&(this.monitorVisible=!0,this.$nextTick((function(){t.$refs.addOrUpdateMonitor.dataForm.id=e,t.$refs.addOrUpdateMonitor.init()})))},logHandle:function(){var e=this;this.logVisible=!0,this.$nextTick((function(){e.$refs.log.init()}))},orderHandle:function(){var e=this;this.orderVisible=!0,this.$nextTick((function(){e.$refs.order.init()}))},getType:function(){return\"one\"===this.$route.params.crawlerType?0:\"oocl\"===this.$route.params.crawlerType?1:\"cosco\"===this.$route.params.crawlerType?2:\"monitor\"===this.$route.params.crawlerType?3:void 0}}},p=u,h=a(\"2877\"),f=Object(h[\"a\"])(p,o,r,!1,null,null,null);t[\"default\"]=f.exports},\"9fca\":function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-dialog\",{attrs:{visible:e.visible,title:e.$t(\"schedule.log\"),\"close-on-click-modal\":!1,\"close-on-press-escape\":!1,width:\"75%\"},on:{\"update:visible\":function(t){e.visible=t}}},[a(\"el-form\",{attrs:{inline:!0,model:e.dataForm},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.getDataList()}}},[a(\"el-form-item\",[a(\"el-input\",{attrs:{placeholder:e.$t(\"schedule.jobId\"),clearable:\"\"},model:{value:e.dataForm.jobId,callback:function(t){e.$set(e.dataForm,\"jobId\",t)},expression:\"dataForm.jobId\"}})],1),a(\"el-form-item\",[a(\"el-button\",{on:{click:function(t){return e.getDataList()}}},[e._v(e._s(e.$t(\"query\")))])],1)],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.dataListLoading,expression:\"dataListLoading\"}],staticStyle:{width:\"100%\"},attrs:{data:e.dataList,border:\"\",height:\"460\"},on:{\"sort-change\":e.dataListSortChangeHandle}},[a(\"el-table-column\",{attrs:{prop:\"jobId\",label:e.$t(\"schedule.jobId\"),\"header-align\":\"center\",align:\"center\",width:\"80\"}}),a(\"el-table-column\",{attrs:{prop:\"beanName\",label:e.$t(\"schedule.beanName\"),\"header-align\":\"center\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"params\",label:e.$t(\"schedule.params\"),\"header-align\":\"center\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"status\",label:e.$t(\"schedule.status\"),\"header-align\":\"center\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[1===t.row.status?a(\"el-tag\",{attrs:{size:\"small\"}},[e._v(e._s(e.$t(\"schedule.statusLog1\")))]):a(\"el-tag\",{staticStyle:{cursor:\"pointer\"},attrs:{type:\"danger\",size:\"small\"},nativeOn:{click:function(a){return e.showErrorInfo(t.row.id)}}},[e._v(e._s(e.$t(\"schedule.statusLog0\")))])]}}])}),a(\"el-table-column\",{attrs:{prop:\"times\",label:e.$t(\"schedule.times\"),\"header-align\":\"center\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"createDate\",label:e.$t(\"schedule.createDate\"),\"header-align\":\"center\",align:\"center\",width:\"180\"}})],1),a(\"el-pagination\",{attrs:{\"current-page\":e.page,\"page-sizes\":[10,20,50,100],\"page-size\":e.limit,total:e.total,layout:\"total, sizes, prev, pager, next, jumper\"},on:{\"size-change\":e.pageSizeChangeHandle,\"current-change\":e.pageCurrentChangeHandle}})],1)},r=[],l=a(\"e1a5\"),i={mixins:[l[\"a\"]],data:function(){return{visible:!1,mixinViewModuleOptions:{getDataListURL:\"/sys/scheduleLog/page\",getDataListIsPage:!0},dataForm:{jobId:\"\"}}},methods:{init:function(){this.visible=!0,this.getDataList()},showErrorInfo:function(e){var t=this;this.$http.get(\"/sys/scheduleLog/\".concat(e)).then((function(e){var a=e.data;if(0!==a.code)return t.$message.error(a.msg);t.$alert(a.data.error)})).catch((function(){}))}}},n=i,s=a(\"2877\"),d=Object(s[\"a\"])(n,o,r,!1,null,null,null);t[\"default\"]=d.exports},b62b:function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-dialog\",{attrs:{visible:e.visible,title:e.dataForm.id?e.$t(\"update\"):e.$t(\"add\"),\"close-on-click-modal\":!1,\"close-on-press-escape\":!1},on:{\"update:visible\":function(t){e.visible=t}}},[a(\"el-form\",{ref:\"dataForm\",attrs:{model:e.dataForm,rules:e.dataRule,\"label-width\":\"120px\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.dataFormSubmitHandle()}}},[a(\"el-form-item\",{attrs:{prop:\"beanName\",label:e.$t(\"schedule.beanName\")}},[a(\"el-input\",{attrs:{disabled:!0},model:{value:e.dataForm.beanName,callback:function(t){e.$set(e.dataForm,\"beanName\",t)},expression:\"dataForm.beanName\"}})],1),a(\"el-form-item\",{attrs:{label:\"账号选择\",\"label-width\":e.formLabelWidth,prop:\"account\"}},[a(\"el-select\",{staticClass:\"m-2\",attrs:{clearable:\"\",placeholder:\"Select\",size:\"large\"},model:{value:e.dataForm.account,callback:function(t){e.$set(e.dataForm,\"account\",t)},expression:\"dataForm.account\"}},e._l(e.accountList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.user,value:e.user}})})),1),a(\"el-button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"primary\",loading:e.isCommitLogin,disabled:\"\"===e.dataForm.account},on:{click:e.login}},[e._v(\"登录 \")])],1),a(\"el-form-item\",{attrs:{label:\"起始港\",\"label-width\":e.formLabelWidth,prop:\"startPort.cityFullNameEn\"}},[a(\"el-select\",{attrs:{change:\"\",multiple:!1,filterable:\"\",remote:\"\",\"reserve-keyword\":\"\",placeholder:\"请输入关键词\",\"remote-method\":e.getStartPort,loading:e.selectFrom.loading},model:{value:e.showStartPortName,callback:function(t){e.showStartPortName=t},expression:\"showStartPortName\"}},e._l(e.selectFrom.options,(function(e){return a(\"el-option\",{key:e.id,attrs:{value:e.cityFullNameCn+\"-\"+e.cityFullNameEn}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"目的港\",\"label-width\":e.formLabelWidth,prop:\"endPort.cityFullNameEn\"}},[a(\"el-select\",{attrs:{change:\"\",multiple:!1,filterable:\"\",remote:\"\",\"reserve-keyword\":\"\",placeholder:\"请输入关键词\",\"remote-method\":e.getEndPort,loading:e.selectTo.loading},model:{value:e.showEndPortName,callback:function(t){e.showEndPortName=t},expression:\"showEndPortName\"}},e._l(e.selectTo.options,(function(e){return a(\"el-option\",{key:e.id,attrs:{value:e.cityFullNameCn+\"-\"+e.cityFullNameEn}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"预计开航时间\"}},[a(\"el-col\",{attrs:{span:11}},[a(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",placeholder:\"最早开航时间\"},model:{value:e.dataForm.startDate,callback:function(t){e.$set(e.dataForm,\"startDate\",t)},expression:\"dataForm.startDate\"}})],1),a(\"el-col\",{staticClass:\"line\",attrs:{span:2}},[e._v(\"-\")]),a(\"el-col\",{attrs:{span:11}},[a(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",placeholder:\"最晚开航时间\"},model:{value:e.dataForm.endDate,callback:function(t){e.$set(e.dataForm,\"endDate\",t)},expression:\"dataForm.endDate\"}})],1)],1),a(\"el-form-item\",{attrs:{prop:\"cronExpression\",label:e.$t(\"schedule.cronExpression\")}},[a(\"el-popover\",{model:{value:e.cronPopover,callback:function(t){e.cronPopover=t},expression:\"cronPopover\"}},[a(\"cron\",{attrs:{i18n:\"cn\"},on:{change:e.changeCron,close:function(t){e.cronPopover=!1}}}),a(\"el-input\",{attrs:{slot:\"reference\",placeholder:e.$t(\"schedule.cronExpressionTips\")},on:{click:function(t){e.cronPopover=!0}},slot:\"reference\",model:{value:e.dataForm.cronExpression,callback:function(t){e.$set(e.dataForm,\"cronExpression\",t)},expression:\"dataForm.cronExpression\"}})],1)],1),a(\"el-form-item\",{attrs:{prop:\"remark\",label:e.$t(\"schedule.remark\")}},[a(\"el-input\",{attrs:{placeholder:e.$t(\"schedule.remark\")},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,\"remark\",t)},expression:\"dataForm.remark\"}})],1)],1),a(\"template\",{slot:\"footer\"},[a(\"el-button\",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t(\"cancel\")))]),a(\"el-button\",{attrs:{loading:e.isCommitForm,type:\"primary\"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t(\"confirm\")))])],1)],2)},r=[],l=(a(\"4160\"),a(\"159b\"),a(\"b047\")),i=a.n(l),n=a(\"117d\"),s=a(\"2bdd\"),d={data:function(){return{visible:!1,showStartPortName:\"\",showEndPortName:\"\",dataForm:{beanName:\"\".concat(this.$route.params.crawlerName),params:\"{}\",cronExpression:\"0/2 * * * * ? *\",remark:\"\",status:0,startPort:{bookingTerritory:\"\",cityFullNameCn:\"\",cityFullNameEn:\"\",cityName:\"\",equalsScore:\"\",id:\"\",isActive:\"\",orderScore:\"\",stateCode:\"\",stateName:\"\",unlocode:\"\",updateTime:\"\"},endPort:{bookingTerritory:\"\",cityFullNameCn:\"\",cityFullNameEn:\"\",cityName:\"\",equalsScore:\"\",id:\"\",isActive:\"\",orderScore:\"\",stateCode:\"\",stateName:\"\",unlocode:\"\",updateTime:\"\"},account:\"\",cookie:\"\",token:\"\",startDate:\"\",endDate:\"\",type:3,flag:!1},cronPopover:!1,dialogTableVisible:!1,dialogFormVisible:!1,isCommitLogin:!1,isCommitForm:!1,formLabelWidth:\"120px\",selectFrom:{options:[],value:[],list:[],loading:!1},selectTo:{options:[],value:[],list:[],loading:!1},accountList:[]}},components:{cron:n[\"cron\"]},computed:{dataRule:function(){return{beanName:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],cronExpression:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}]}}},watch:{deep:!0,showStartPortName:function(e,t){var a=this;this.selectFrom.options.forEach((function(t){t.cityFullNameCn+\"-\"+t.cityFullNameEn===e&&(a.dataForm.startPort=t)}))},showEndPortName:function(e,t){var a=this;this.selectTo.options.forEach((function(t){t.cityFullNameCn+\"-\"+t.cityFullNameEn===e&&(a.dataForm.endPort=t)}))}},methods:{getStartPort:function(e){var t=this;\"\"!==e?(this.selectFrom.loading=!0,setTimeout((function(){t.selectFrom.loading=!1,console.log(t.dataForm.cookie),Object(s[\"b\"])(e,t.dataForm.cookie,t.dataForm.token).then((function(e){var a=e.data;\"\"===a.data&&t.$message.info(\"未搜索到结果\"),t.selectFrom.list=a.data||[],t.selectFrom.options=t.selectFrom.list}))}),50)):this.selectFrom.options=[]},getEndPort:function(e){var t=this;\"\"!==e?(this.selectTo.loading=!0,setTimeout((function(){t.selectTo.loading=!1,Object(s[\"b\"])(e,t.dataForm.cookie,t.dataForm.token).then((function(e){var a=e.data;\"\"===a.data&&t.$message.info(\"未搜索到结果\"),t.selectTo.list=a.data||[],t.selectTo.options=t.selectTo.list}))}),50)):this.selectFrom.options=[]},login:function(){var e=this;this.isCommitLogin=!0,Object(s[\"c\"])(this.dataForm.account).then((function(t){var a=t.data;0===a.code?(e.$message.success(\"登陆成功\"),e.dataForm.cookie=a.data.cookie,e.dataForm.token=a.data.token):e.$message.error(a.msg),e.isCommitLogin=!1}))},init:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.showStartPortName=\"\",e.showEndPortName=\"\",e.dataForm.startDate=\"\",e.dataForm.endDate=\"\",e.$refs.dataForm.resetFields(),e.dataForm.id&&e.getInfo()}))},changeCron:function(e){this.dataForm.cronExpression=e},getInfo:function(){var e=this;this.$http.get(\"/sys/schedule/\".concat(this.dataForm.id)).then((function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.msg);e.dataForm=a.data,e.showStartPortName=e.dataForm.startPort.cityFullNameCn+\"-\"+e.dataForm.startPort.cityFullNameEn,e.showEndPortName=e.dataForm.endPort.cityFullNameCn+\"-\"+e.dataForm.endPort.cityFullNameEn})).catch((function(){}))},dataFormSubmitHandle:i()((function(){var e=this;this.$refs.dataForm.validate((function(t){if(!t)return!1;var a={tag:\"monitor\",data:JSON.stringify(e.dataForm)};e.isCommitForm=!0,e.$http[e.dataForm.id?\"put\":\"post\"](\"/sys/schedule\",a).then((function(t){var a=t.data;if(0!==a.code)return e.visible=!1,e.$message.error(a.msg);e.$message({message:e.$t(\"prompt.success\"),type:\"success\",duration:500,onClose:function(){e.visible=!1,e.$emit(\"refreshDataList\")}}),e.isCommitForm=!1})).catch((function(){}))}))}),1e3,{leading:!0,trailing:!1})},mounted:function(){var e=this;Object(s[\"a\"])(!1,0).then((function(t){var a=t.data;e.accountList=a.data}))},beforeMount:function(){this.dataForm.cookie=\"\",this.dataForm.token=\"\"}},c=d,m=a(\"2877\"),u=Object(m[\"a\"])(c,o,r,!1,null,null,null);t[\"default\"]=u.exports},d8da:function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-dialog\",{attrs:{visible:e.visible,title:e.dataForm.id?e.$t(\"update\"):e.$t(\"add\"),\"close-on-click-modal\":!1,\"close-on-press-escape\":!1},on:{\"update:visible\":function(t){e.visible=t}}},[a(\"el-form\",{ref:\"dataForm\",attrs:{model:e.dataForm,rules:e.dataRule,\"label-width\":\"120px\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.dataFormSubmitHandle()}}},[a(\"el-form-item\",{attrs:{prop:\"beanName\",label:e.$t(\"schedule.beanName\")}},[a(\"el-input\",{attrs:{disabled:!0},model:{value:e.dataForm.beanName,callback:function(t){e.$set(e.dataForm,\"beanName\",t)},expression:\"dataForm.beanName\"}})],1),a(\"el-form-item\",{attrs:{label:\"账号选择\",\"label-width\":e.formLabelWidth,prop:\"account\"}},[a(\"el-select\",{staticClass:\"m-2\",attrs:{clearable:\"\",placeholder:\"Select\",size:\"large\"},model:{value:e.dataForm.account,callback:function(t){e.$set(e.dataForm,\"account\",t)},expression:\"dataForm.account\"}},e._l(e.accountList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.user,value:e.user}})})),1),a(\"el-button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"primary\",loading:e.isCommitLogin,disabled:\"\"===e.dataForm.account},on:{click:e.login}},[e._v(\"登录 \")])],1),a(\"el-form-item\",{attrs:{label:\"起始港\",\"label-width\":e.formLabelWidth,prop:\"startPort.cityFullNameEn\"}},[a(\"el-select\",{attrs:{change:\"\",multiple:!1,filterable:\"\",remote:\"\",\"reserve-keyword\":\"\",placeholder:\"请输入关键词\",\"remote-method\":e.getStartPort,loading:e.selectFrom.loading},model:{value:e.showStartPortName,callback:function(t){e.showStartPortName=t},expression:\"showStartPortName\"}},e._l(e.selectFrom.options,(function(e){return a(\"el-option\",{key:e.id,attrs:{value:e.cityFullNameCn+\"-\"+e.cityFullNameEn}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"目的港\",\"label-width\":e.formLabelWidth,prop:\"endPort.cityFullNameEn\"}},[a(\"el-select\",{attrs:{change:\"\",multiple:!1,filterable:\"\",remote:\"\",\"reserve-keyword\":\"\",placeholder:\"请输入关键词\",\"remote-method\":e.getEndPort,loading:e.selectTo.loading},model:{value:e.showEndPortName,callback:function(t){e.showEndPortName=t},expression:\"showEndPortName\"}},e._l(e.selectTo.options,(function(e){return a(\"el-option\",{key:e.id,attrs:{value:e.cityFullNameCn+\"-\"+e.cityFullNameEn}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"集装箱类型\",\"label-width\":e.formLabelWidth,prop:\"equipment\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.dataForm.equipment,callback:function(t){e.$set(e.dataForm,\"equipment\",t)},expression:\"dataForm.equipment\"}},e._l(e.equipmentType,(function(e){return a(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"数量\",\"label-width\":e.formLabelWidth,prop:\"quantity\"}},[a(\"el-input-number\",{attrs:{min:1,max:100,label:\"集装箱数量\"},model:{value:e.dataForm.quantity,callback:function(t){e.$set(e.dataForm,\"quantity\",e._n(t))},expression:\"dataForm.quantity\"}})],1),a(\"el-form-item\",{attrs:{label:\"指定航名航次\",\"label-width\":e.formLabelWidth,prop:\"isNeedVesselName\"}},[a(\"el-radio\",{attrs:{label:!0},model:{value:e.dataForm.isNeedVesselName,callback:function(t){e.$set(e.dataForm,\"isNeedVesselName\",t)},expression:\"dataForm.isNeedVesselName\"}},[e._v(\"是\")]),a(\"el-radio\",{attrs:{label:!1},model:{value:e.dataForm.isNeedVesselName,callback:function(t){e.$set(e.dataForm,\"isNeedVesselName\",t)},expression:\"dataForm.isNeedVesselName\"}},[e._v(\"否\")])],1),e.dataForm.isNeedVesselName?a(\"el-form-item\",{attrs:{label:\"航名\",\"label-width\":e.formLabelWidth,prop:\"vesselName\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.dataForm.vesselName,callback:function(t){e.$set(e.dataForm,\"vesselName\",t)},expression:\"dataForm.vesselName\"}})],1):e._e(),e.dataForm.isNeedVesselName?a(\"el-form-item\",{attrs:{label:\"航次\",\"label-width\":e.formLabelWidth,prop:\"voyage\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},model:{value:e.dataForm.voyage,callback:function(t){e.$set(e.dataForm,\"voyage\",t)},expression:\"dataForm.voyage\"}})],1):e._e(),a(\"el-form-item\",{attrs:{label:\"可接受最大价格\",\"label-width\":e.formLabelWidth,prop:\"price\"}},[a(\"el-input-number\",{attrs:{min:0,max:99999},model:{value:e.dataForm.price,callback:function(t){e.$set(e.dataForm,\"price\",e._n(t))},expression:\"dataForm.price\"}})],1),a(\"el-form-item\",{attrs:{label:\"预计开航时间\"}},[a(\"el-col\",{attrs:{span:11}},[a(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",placeholder:\"最早开航时间\"},model:{value:e.dataForm.startDate,callback:function(t){e.$set(e.dataForm,\"startDate\",t)},expression:\"dataForm.startDate\"}})],1),a(\"el-col\",{staticClass:\"line\",attrs:{span:2}},[e._v(\"-\")]),a(\"el-col\",{attrs:{span:11}},[a(\"el-date-picker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",placeholder:\"最晚开航时间\"},model:{value:e.dataForm.endDate,callback:function(t){e.$set(e.dataForm,\"endDate\",t)},expression:\"dataForm.endDate\"}})],1)],1),a(\"el-form-item\",{attrs:{label:\"搜索子账号\",\"label-width\":e.formLabelWidth,prop:\"orderAccount\"}},[a(\"el-select\",{attrs:{multiple:\"\",placeholder:\"请选择\"},model:{value:e.dataForm.childAccount,callback:function(t){e.$set(e.dataForm,\"childAccount\",t)},expression:\"dataForm.childAccount\"}},e._l(e.childAccountList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.user,value:e.user}})})),1)],1),a(\"el-form-item\",{attrs:{prop:\"cronExpression\",label:e.$t(\"schedule.cronExpression\")}},[a(\"el-popover\",{model:{value:e.cronPopover,callback:function(t){e.cronPopover=t},expression:\"cronPopover\"}},[a(\"cron\",{attrs:{i18n:\"cn\"},on:{change:e.changeCron,close:function(t){e.cronPopover=!1}}}),a(\"el-input\",{attrs:{slot:\"reference\",placeholder:e.$t(\"schedule.cronExpressionTips\")},on:{click:function(t){e.cronPopover=!0}},slot:\"reference\",model:{value:e.dataForm.cronExpression,callback:function(t){e.$set(e.dataForm,\"cronExpression\",t)},expression:\"dataForm.cronExpression\"}})],1)],1),a(\"el-form-item\",{attrs:{prop:\"remark\",label:e.$t(\"schedule.remark\")}},[a(\"el-input\",{attrs:{placeholder:e.$t(\"schedule.remark\")},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,\"remark\",t)},expression:\"dataForm.remark\"}})],1)],1),a(\"template\",{slot:\"footer\"},[a(\"el-button\",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t(\"cancel\")))]),a(\"el-button\",{attrs:{loading:e.isCommitForm,type:\"primary\"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t(\"confirm\")))])],1)],2)},r=[],l=(a(\"4160\"),a(\"159b\"),a(\"b047\")),i=a.n(l),n=a(\"117d\"),s=a(\"2bdd\"),d=a(\"b775\");function c(e){return Object(d[\"a\"])({url:\"/cosco/login\",method:\"POST\",data:{username:e}})}function m(e,t,a){return Object(d[\"a\"])({url:\"/cosco/port\",method:\"POST\",data:{cityFullName:e,cookieValue:t,tokenValue:a}})}var u={data:function(){return{visible:!1,showStartPortName:\"\",showEndPortName:\"\",dataForm:{beanName:\"\".concat(this.$route.params.crawlerName),params:\"{}\",cronExpression:\"0/2 * * * * ? *\",remark:\"\",status:0,startPort:{cityFullNameCn:\"\",cityFullNameEn:\"\",cityName:\"\",ctryName:\"\",id:\"\",isActive:\"\",stateCode:\"\",stateName:\"\",unlocode:\"\",updateTime:\"\",updateBy:\"\"},endPort:{cityFullNameCn:\"\",cityFullNameEn:\"\",cityName:\"\",ctryName:\"\",id:\"\",isActive:\"\",stateCode:\"\",stateName:\"\",unlocode:\"\",updateTime:\"\",updateBy:\"\"},equipment:\"\",vesselName:\"\",voyage:\"\",quantity:1,price:0,account:\"\",cookie:\"\",token:\"\",startDate:\"\",endDate:\"\",childAccount:[],isNeedVesselName:!1,type:2},cronPopover:!1,dialogTableVisible:!1,dialogFormVisible:!1,isCommitLogin:!1,isCommitForm:!1,formLabelWidth:\"120px\",selectFrom:{options:[],value:[],list:[],loading:!1},selectTo:{options:[],value:[],list:[],loading:!1},equipmentType:[{value:\"20GP\",label:\"20GP\"},{value:\"40GP\",label:\"40GP\"},{value:\"40HQ\",label:\"40HQ\"}],accountList:[],childAccountList:[]}},components:{cron:n[\"cron\"]},computed:{dataRule:function(){return{beanName:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],cronExpression:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],account:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],showStartPortName:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],showEndPortName:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],equipment:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],startDate:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}],childAccount:[{required:!0,message:this.$t(\"validate.required\"),trigger:\"blur\"}]}}},watch:{deep:!0,showStartPortName:function(e,t){var a=this;this.selectFrom.options.forEach((function(t){t.cityFullNameCn+\"-\"+t.cityFullNameEn===e&&(a.dataForm.startPort=t)}))},showEndPortName:function(e,t){var a=this;this.selectTo.options.forEach((function(t){t.cityFullNameCn+\"-\"+t.cityFullNameEn===e&&(a.dataForm.endPort=t)}))}},methods:{getStartPort:function(e){var t=this;\"\"!==e?(this.selectFrom.loading=!0,setTimeout((function(){t.selectFrom.loading=!1,console.log(t.dataForm.cookie),m(e,t.dataForm.cookie,t.dataForm.token).then((function(e){var a=e.data;\"\"===a.data&&t.$message.info(\"未搜索到结果\"),t.selectFrom.list=a.data||[],t.selectFrom.options=t.selectFrom.list}))}),50)):this.selectFrom.options=[]},getEndPort:function(e){var t=this;\"\"!==e?(this.selectTo.loading=!0,setTimeout((function(){t.selectTo.loading=!1,m(e,t.dataForm.cookie,t.dataForm.token).then((function(e){var a=e.data;\"\"===a.data&&t.$message.info(\"未搜索到结果\"),t.selectTo.list=a.data||[],t.selectTo.options=t.selectTo.list}))}),50)):this.selectFrom.options=[]},login:function(){var e=this;this.isCommitLogin=!0,c(this.dataForm.account).then((function(t){var a=t.data;0===a.code?(e.$message.success(\"登陆成功\"),e.dataForm.cookie=a.data.cookie,e.dataForm.token=a.data.token):e.$message.error(a.msg),e.isCommitLogin=!1}))},init:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.showStartPortName=\"\",e.showEndPortName=\"\",e.dataForm.startDate=\"\",e.dataForm.endDate=\"\",e.dataForm.childAccount=[],e.$refs.dataForm.resetFields(),e.dataForm.id&&e.getInfo()}))},changeCron:function(e){this.dataForm.cronExpression=e},getInfo:function(){var e=this;this.$http.get(\"/sys/schedule/\".concat(this.dataForm.id)).then((function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.msg);e.dataForm=a.data,e.showStartPortName=e.dataForm.startPort.cityFullNameCn+\"-\"+e.dataForm.startPort.cityFullNameEn,e.showEndPortName=e.dataForm.endPort.cityFullNameCn+\"-\"+e.dataForm.endPort.cityFullNameEn})).catch((function(){}))},dataFormSubmitHandle:i()((function(){var e=this;this.$refs.dataForm.validate((function(t){if(!t)return!1;var a={tag:\"cosco\",data:JSON.stringify(e.dataForm)};e.isCommitForm=!0,e.$http[e.dataForm.id?\"put\":\"post\"](\"/sys/schedule\",a).then((function(t){var a=t.data;if(0!==a.code)return e.visible=!1,e.$message.error(a.msg);e.$message({message:e.$t(\"prompt.success\"),type:\"success\",duration:500,onClose:function(){e.visible=!1,e.$emit(\"refreshDataList\")}}),e.isCommitForm=!1})).catch((function(){}))}))}),1e3,{leading:!0,trailing:!1})},mounted:function(){var e=this;Object(s[\"a\"])(!0,1).then((function(t){var a=t.data;e.accountList=a.data})),Object(s[\"a\"])(!1,1).then((function(t){var a=t.data;e.childAccountList=a.data})),this.dataForm.cookie=\"\",this.dataForm.token=\"\"}},p=u,h=a(\"2877\"),f=Object(h[\"a\"])(p,o,r,!1,null,null,null);t[\"default\"]=f.exports}}]);","extractedComments":[]}