"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var cellType="footer",_default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},mounted:function(){var e=this.$parent,t=this.$el,l=this.$refs,o=this.fixedType,r=e.elemStore,i="".concat(o||"main","-footer-");r["".concat(i,"wrapper")]=t,r["".concat(i,"table")]=l.table,r["".concat(i,"colgroup")]=l.colgroup,r["".concat(i,"list")]=l.tfoot,r["".concat(i,"xSpace")]=l.xSpace},render:function(F){var e=this._e,L=this.$parent,U=this.fixedType,t=this.fixedColumn,k=this.tableColumn,E=this.footerData,O=L.$listeners,l=L.tId,o=L.footerRowClassName,q=L.footerCellClassName,r=L.footerRowStyle,A=L.footerCellStyle,D=L.footerAlign,X=L.footerSpanMethod,j=L.align,N=L.scrollXLoad,R=L.columnKey,M=L.showFooterOverflow,z=L.currentColumn,B=L.overflowX,i=L.scrollbarWidth,H=L.tooltipOpts;return X||(U&&M?k=t:N&&U&&(k=t)),F("div",{class:["vxe-table--footer-wrapper",U?"fixed-".concat(U,"--wrapper"):"body--wrapper"],attrs:{"data-tid":l},on:{scroll:this.scrollEvent}},[U?e():F("div",{class:"vxe-body--x-space",ref:"xSpace"}),F("table",{class:"vxe-table--footer",attrs:{"data-tid":l,cellspacing:0,cellpadding:0,border:0},ref:"table"},[F("colgroup",{ref:"colgroup"},k.map(function(e,t){return F("col",{attrs:{name:e.id},key:t})}).concat(i?[F("col",{attrs:{name:"col_gutter"}})]:[])),F("tfoot",{ref:"tfoot"},E.map(function(I,P){return F("tr",{class:["vxe-footer--row",o?_xeUtils.default.isFunction(o)?o({$table:L,$rowIndex:P,fixed:U,type:cellType}):o:""],style:r?_xeUtils.default.isFunction(r)?r({$table:L,$rowIndex:P,fixed:U,type:cellType}):r:null},k.map(function(t,e){var l,o=t.showFooterOverflow,r=t.footerAlign,i=t.align,n=t.footerClassName,a=H.enabled,c=t.children&&t.children.length,s=U?t.fixed!==U&&!c:t.fixed&&B,d=_xeUtils.default.isUndefined(o)||_xeUtils.default.isNull(o)?M:o,f=r||i||D||j,u="ellipsis"===d,p="title"===d,x=!0===d||"tooltip"===d,m=p||x||u,y={"data-colid":t.id},v={},b=L.getColumnIndex(t),g=L._getColumnIndex(t),_={$table:L,$rowIndex:P,column:t,columnIndex:b,$columnIndex:e,_columnIndex:g,itemIndex:g,items:I,fixed:U,type:cellType,data:E};if(N&&!m&&(u=m=!0),(p||x||a)&&(v.mouseenter=function(e){p?_tools.DomTools.updateCellTitle(e,t):(x||a)&&L.triggerFooterTooltipEvent(e,_)}),(x||a)&&(v.mouseleave=function(e){(x||a)&&L.handleTargetLeaveEvent(e)}),O["footer-cell-click"]&&(v.click=function(e){L.emitEvent("footer-cell-click",Object.assign({cell:e.currentTarget},_),e)}),O["footer-cell-dblclick"]&&(v.dblclick=function(e){L.emitEvent("footer-cell-dblclick",Object.assign({cell:e.currentTarget},_),e)}),X){var h=X(_)||{},T=h.rowspan,w=void 0===T?1:T,$=h.colspan,C=void 0===$?1:$;if(!w||!C)return null;1<w&&(y.rowspan=w),1<C&&(y.colspan=C)}var S="seq"===t.type||"index"===t.type?"seq":t.type;return F("td",{class:["vxe-footer--column",t.id,(l={},_defineProperty(l,"col--".concat(f),f),_defineProperty(l,"col--".concat(S),S),_defineProperty(l,"col--last",e===k.length-1),_defineProperty(l,"fixed--hidden",s),_defineProperty(l,"col--ellipsis",m),_defineProperty(l,"col--current",z===t),l),_tools.UtilTools.getClass(n,_),_tools.UtilTools.getClass(q,_)],attrs:y,style:A?_xeUtils.default.isFunction(A)?A(_):A:null,on:v,key:R?t.id:e},[F("div",{class:["vxe-cell",{"c--title":p,"c--tooltip":x,"c--ellipsis":u}]},t.renderFooter(F,_))])}).concat(i?[F("td",{class:"col--gutter"})]:[]))}))])])},methods:{scrollEvent:function(e){var t=this.$parent,l=this.fixedType,o=t.$refs,r=t.scrollXLoad,i=t.triggerScrollXEvent,n=t.lastScrollLeft,a=o.tableHeader,c=o.tableBody,s=o.tableFooter,d=o.validTip,f=a?a.$el:null,u=s?s.$el:null,p=c.$el,x=u.scrollLeft,m=x!==n;t.lastScrollLeft=x,t.lastScrollTime=Date.now(),f&&(f.scrollLeft=x),p&&(p.scrollLeft=x),r&&m&&i(e),m&&d&&d.visible&&d.updatePlacement(),t.emitEvent("scroll",{type:cellType,fixed:l,scrollTop:p.scrollTop,scrollLeft:x,isX:m,isY:!1},e)}}};exports.default=_default;